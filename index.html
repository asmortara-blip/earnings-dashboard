<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pre-Earnings Dashboard — 2026-02-27</title>
  <script>try{if(localStorage.getItem('theme')==='light')document.documentElement.setAttribute('data-theme','light');}catch(e){}</script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
:root {
  --bg:       #09090f;
  --surface:  #111120;
  --card:     #141428;
  --card2:    #1c1c38;
  --border:   #252545;
  --accent:   #a78bfa;
  --text:     #e2e8f0;
  --muted:    #6b7280;
  --green:    #22c55e;
  --red:      #ef4444;
  --yellow:   #facc15;
  --orange:   #f97316;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue", sans-serif;
  background: var(--bg);
  color: var(--text);
  font-size: 13.5px;
  line-height: 1.55;
}

/* ── NAV ── */
nav {
  position: sticky;
  top: 0;
  z-index: 200;
  background: #0a0a16;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: stretch;
  padding: 0 1.75rem;
  gap: 0.25rem;
}
.nav-brand {
  font-size: 0.95rem;
  font-weight: 800;
  color: var(--accent);
  padding: 0.85rem 1.5rem 0.85rem 0;
  border-right: 1px solid var(--border);
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.nav-brand .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); }
nav a {
  color: var(--muted);
  text-decoration: none;
  padding: 0 1rem;
  font-size: 0.82rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.4rem;
  border-bottom: 2px solid transparent;
  transition: color 0.15s, border-color 0.15s;
}
nav a:hover, nav a.active { color: var(--text); border-color: var(--accent); }
nav .count-pill {
  background: var(--card2);
  color: var(--muted);
  font-size: 0.7rem;
  padding: 1px 6px;
  border-radius: 100px;
}
.nav-ts {
  margin-left: auto;
  color: var(--muted);
  font-size: 0.72rem;
  display: flex;
  align-items: center;
}

/* ── LAYOUT ── */
main { max-width: 1440px; margin: 0 auto; padding: 2.25rem 1.75rem 5rem; }
section { margin-bottom: 4rem; }
.section-header { margin-bottom: 1.25rem; }
.section-header h2 {
  font-size: 1.15rem;
  font-weight: 700;
  color: var(--accent);
  display: flex;
  align-items: baseline;
  gap: 0.6rem;
}
.section-header h2 .sub {
  font-size: 0.78rem;
  font-weight: 400;
  color: var(--muted);
}
.section-rule {
  border: none;
  border-top: 1px solid var(--border);
  margin-top: 0.6rem;
}

/* ── WATCHLIST GRID ── */
.wl-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  gap: 1.25rem;
}

/* ── TICKER CARD ── */
.ticker-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  transition: box-shadow 0.2s, transform 0.15s;
}
.ticker-card:hover {
  box-shadow: 0 0 0 1px var(--card-accent), 0 8px 28px #00000066;
  transform: translateY(-1px);
}
.card-top {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  padding: 1rem 1.15rem 0.85rem;
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}
.tk-symbol {
  font-size: 1.5rem;
  font-weight: 900;
  letter-spacing: -0.01em;
  flex-shrink: 0;
}
.earnings-chip {
  font-size: 0.7rem;
  font-weight: 500;
  padding: 3px 9px;
  border-radius: 100px;
  border: 1px solid;
  white-space: nowrap;
  flex-shrink: 0;
}
.card-header-right {
  margin-left: auto;
  display: flex;
  gap: 0.4rem;
  align-items: center;
  flex-wrap: wrap;
}
.action-badge {
  font-size: 0.78rem;
  font-weight: 800;
  padding: 4px 11px;
  border-radius: 7px;
  border: 1px solid;
  white-space: nowrap;
  flex-shrink: 0;
}
.pos-badge {
  font-size: 0.68rem;
  font-weight: 600;
  padding: 3px 8px;
  border-radius: 6px;
  background: var(--card2);
  color: var(--muted);
  border: 1px solid var(--border);
  white-space: nowrap;
  flex-shrink: 0;
}
.chart-toggle {
  font-size: 0.7rem;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  padding: 3px 9px;
  border-radius: 100px;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s;
  flex-shrink: 0;
}
.chart-toggle:hover { color: var(--text); border-color: var(--accent); }
.charts-wrap { display: none; }
.ticker-card.charts-expanded .charts-wrap { display: block; }

/* Score bar */
.score-row {
  display: flex;
  align-items: center;
  gap: 0.7rem;
  padding: 0.7rem 1.15rem;
  border-bottom: 1px solid var(--border);
}
.score-lbl { font-size: 0.68rem; color: var(--muted); width: 34px; flex-shrink: 0; }
.score-track {
  flex: 1;
  height: 7px;
  background: var(--card2);
  border-radius: 4px;
  position: relative;
  overflow: hidden;
}
.score-center {
  position: absolute;
  left: 50%; top: 0;
  width: 1px; height: 100%;
  background: var(--border);
}
.score-fill {
  position: absolute;
  top: 0; height: 100%;
  border-radius: 4px;
}
.score-num {
  font-size: 0.9rem;
  font-weight: 800;
  width: 40px;
  text-align: right;
  flex-shrink: 0;
}

/* Factor breakdown mini-bars */
.factors-section {
  padding: 0.8rem 1.15rem;
  border-bottom: 1px solid var(--border);
}
.factors-title {
  font-size: 0.66rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 0.55rem;
}
.factor-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 4px;
}
.factor-name { font-size: 0.68rem; color: var(--muted); width: 90px; flex-shrink: 0; }
.factor-bar-track {
  flex: 1;
  height: 4px;
  background: var(--card2);
  border-radius: 2px;
  position: relative;
  overflow: hidden;
}
.factor-bar-fill {
  position: absolute;
  top: 0; height: 100%;
  border-radius: 2px;
}
.factor-val {
  font-size: 0.68rem;
  width: 32px;
  text-align: right;
  flex-shrink: 0;
}

/* 2-col metric grid */
.metrics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
}
.metric-cell {
  padding: 0.65rem 1.15rem;
  border-bottom: 1px solid var(--border);
  border-right: 1px solid var(--border);
}
.metric-cell:nth-child(2n) { border-right: none; }
.metric-cell:nth-last-child(-n+2) { border-bottom: none; }
.metric-lbl {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 3px;
}
.metric-val { font-size: 0.88rem; font-weight: 600; }
.metric-sub { font-size: 0.7rem; color: var(--muted); margin-top: 2px; }

/* Sentiment bar */
.sent-bar { display: flex; height: 3px; margin-top: 5px; border-radius: 2px; overflow: hidden; }
.sb-g { background: var(--green); }
.sb-r { background: var(--red); }
.sb-n { background: var(--border); }

/* Catalysts */
.catalysts-section {
  padding: 0.75rem 1.15rem;
  border-top: 1px solid var(--border);
  flex: 1;
}
.cat-title {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 0.4rem;
}
.cat-item {
  font-size: 0.77rem;
  color: #c4b5fd;
  padding: 2px 0;
  display: flex;
  gap: 0.4rem;
  align-items: flex-start;
  line-height: 1.4;
}
.cat-item .arr { color: var(--muted); flex-shrink: 0; margin-top: 1px; }
.cat-none { font-size: 0.75rem; color: var(--muted); font-style: italic; }

/* Risk alerts */
.risk-section {
  padding: 0.6rem 1.15rem;
  border-top: 1px solid var(--border);
}
.risk-title {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 0.3rem;
}
.risk-item { font-size: 0.75rem; color: #fca5a5; padding: 1px 0; }
.risk-item::before { content: "⚠ "; }

/* ── REGIME + PATTERNS ── */
.regime-row {
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  padding: 0.5rem 1.15rem 0.25rem;
  border-top: 1px solid var(--border);
  flex-wrap: wrap;
}
.regime-lbl {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  flex-shrink: 0;
}
.regime-name { font-size: 0.82rem; font-weight: 600; }
.regime-impl { font-size: 0.72rem; color: var(--muted); }
.pat-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
  padding: 0.2rem 1.15rem 0.5rem;
}
.pat-badge {
  font-size: 0.7rem;
  padding: 0.15rem 0.5rem;
  border-radius: 999px;
  border: 1px solid currentColor;
  opacity: 0.85;
}
.pat-high   { color: #f59e0b; }
.pat-medium { color: #6366f1; }
.pat-low    { color: #9ca3af; }
.pat-conf   { opacity: 0.65; font-size: 0.65rem; }

/* ── SCANNER TABLE ── */
.scanner-outer {
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
}
.scan-table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.85rem;
}
.scan-table thead th {
  background: #0d0d1e;
  color: var(--accent);
  padding: 10px 15px;
  text-align: left;
  font-weight: 600;
  white-space: nowrap;
  border-bottom: 1px solid var(--border);
}
.scan-table thead th:first-child { border-radius: 0; }
.scan-table tbody td {
  padding: 9px 15px;
  border-bottom: 1px solid #1a1a30;
  white-space: nowrap;
}
.scan-table tbody tr:last-child td { border-bottom: none; }
.scan-table tbody tr:hover { background: var(--card); }
.rank-num { color: var(--muted); font-size: 0.75rem; }
.tk-name { font-weight: 700; font-size: 0.92rem; }
.move-pos { color: var(--green); }
.move-neg { color: var(--red); }
.scan-score { font-weight: 700; }
.days-badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 100px;
  font-size: 0.7rem;
  font-weight: 600;
  border: 1px solid;
}

/* ── CHARTS ── */
.sparkline-wrap {
  padding: 0.5rem 0.75rem 0.25rem;
  border-bottom: 1px solid var(--border);
  height: 72px;
  position: relative;
}
.chart-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  border-bottom: 1px solid var(--border);
}
.chart-cell {
  padding: 0.6rem 0.75rem 0.5rem;
  border-right: 1px solid var(--border);
}
.chart-cell:last-child { border-right: none; }
.chart-lbl {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 0.35rem;
}
.donut-wrap {
  position: relative;
  height: 120px;
}
.donut-center {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.68rem;
  font-weight: 700;
  text-align: center;
  color: var(--text);
  pointer-events: none;
  line-height: 1.3;
}
.radar-wrap { height: 120px; }

/* ── SCORE HISTORY CHART ── */
.history-wrap {
  padding: 0.35rem 0.75rem 0.25rem;
  border-bottom: 1px solid var(--border);
  height: 64px;
  position: relative;
}
.history-lbl {
  position: absolute;
  top: 5px; left: 10px;
  font-size: 0.58rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--muted);
  pointer-events: none;
}

/* ── TRACK RECORD SECTION ── */
.outcome-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
  gap: 0.9rem;
  margin-bottom: 1.5rem;
}
.stat-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 0.85rem 1.1rem;
}
.stat-card .stat-lbl {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 4px;
}
.stat-card .stat-val {
  font-size: 1.45rem;
  font-weight: 800;
  line-height: 1.2;
}
.stat-card .stat-sub {
  font-size: 0.7rem;
  color: var(--muted);
  margin-top: 3px;
}
.outcome-table-outer {
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 1.5rem;
}
.outcome-table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.82rem;
}
.outcome-table thead th {
  background: #0d0d1e;
  color: var(--accent);
  padding: 9px 13px;
  text-align: left;
  font-weight: 600;
  white-space: nowrap;
  border-bottom: 1px solid var(--border);
}
.outcome-table tbody td {
  padding: 8px 13px;
  border-bottom: 1px solid #1a1a30;
  white-space: nowrap;
}
.outcome-table tbody tr:last-child td { border-bottom: none; }
.outcome-table tbody tr:hover { background: var(--card); }
.correct-yes { color: var(--green); font-weight: 700; }
.correct-no  { color: var(--red);   font-weight: 700; }
.correct-na  { color: var(--muted); }
.scatter-outer {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1rem 1rem 0.75rem;
  background: var(--card);
  height: 280px;
  position: relative;
}
.scatter-lbl {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 0.5rem;
}

/* ── SUMMARY PILLS + FILTER BAR ── */
.summary-pills {
  display: flex;
  gap: 0.75rem;
  flex-wrap: wrap;
  font-size: 0.75rem;
  margin-top: 0.45rem;
}
.filter-bar {
  position: sticky;
  top: 44px;
  z-index: 100;
  background: var(--bg);
  padding: 0.55rem 0 0.55rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1rem;
}
.filter-btns { display: flex; gap: 0.4rem; flex-wrap: wrap; }
.filter-btn {
  background: var(--card);
  border: 1px solid var(--border);
  color: var(--muted);
  font-size: 0.78rem;
  font-weight: 500;
  padding: 5px 14px;
  border-radius: 100px;
  cursor: pointer;
  transition: all 0.15s;
}
.filter-btn:hover { color: var(--text); border-color: var(--accent); }
.filter-btn.active {
  background: #a78bfa22;
  color: var(--accent);
  border-color: var(--accent);
}
.sort-select {
  background: var(--card);
  border: 1px solid var(--border);
  color: var(--text);
  font-size: 0.78rem;
  padding: 5px 10px;
  border-radius: 8px;
  cursor: pointer;
  margin-left: auto;
  outline: none;
}

/* ── COMPARISON TABLE ── */
.cmp-table-outer {
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 1.25rem;
}
.cmp-table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.84rem;
}
.cmp-table thead th {
  background: #0d0d1e;
  color: var(--accent);
  padding: 9px 14px;
  text-align: left;
  font-weight: 600;
  white-space: nowrap;
  border-bottom: 1px solid var(--border);
}
.cmp-table tbody td {
  padding: 9px 14px;
  border-bottom: 1px solid #1a1a30;
  white-space: nowrap;
}
.cmp-table tbody tr:last-child td { border-bottom: none; }
.cmp-table tbody tr:hover { background: var(--card2); }

/* ── MARKET CONTEXT STRIP ── */
.mkt-strip {
  background: #08081a;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 1.75rem;
  overflow-x: auto;
  min-height: 42px;
  flex-wrap: nowrap;
}
.mkt-lbl {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
  margin-right: 0.75rem;
  flex-shrink: 0;
}
.mkt-item {
  display: flex;
  align-items: center;
  gap: 0.45rem;
  padding: 0 1.25rem 0 0;
  margin-right: 1.25rem;
  border-right: 1px solid var(--border);
  white-space: nowrap;
  flex-shrink: 0;
}
.mkt-item:last-child { border-right: none; margin-right: 0; }
.mkt-tk { font-weight: 700; font-size: 0.82rem; color: var(--text); }
.mkt-price { font-size: 0.8rem; color: var(--muted); }
.mkt-move { font-size: 0.75rem; font-weight: 600; }
.mkt-spark-wrap { width: 60px; height: 20px; position: relative; }

/* ── SENTIMENT OVERLAY PANEL ── */
.overlay-panel {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 0.85rem 1rem 0.75rem;
  margin-bottom: 1.25rem;
}
.overlay-lbl {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 0.55rem;
}
.overlay-wrap { height: 160px; position: relative; }

/* ── DIFF BADGE ── */
.diff-badge {
  font-size: 0.68rem;
  font-weight: 700;
  margin-left: 0.35rem;
  opacity: 0.9;
}

/* ── SIGNAL CALIBRATION ── */
.calib-section {
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 1rem 1rem 0.85rem;
  background: var(--card);
  margin-top: 1.5rem;
}
.calib-title {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  margin-bottom: 0.75rem;
}
.calib-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-bottom: 1rem;
}
@media (max-width: 640px) { .calib-grid { grid-template-columns: 1fr; } }
.calib-sub {
  font-size: 0.7rem;
  color: var(--accent);
  font-weight: 600;
  margin-bottom: 0.4rem;
}
.calib-table {
  border-collapse: collapse;
  width: 100%;
  font-size: 0.8rem;
}
.calib-table thead th {
  color: var(--muted);
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  padding: 4px 8px;
  text-align: left;
  border-bottom: 1px solid var(--border);
}
.calib-table tbody td { padding: 6px 8px; border-bottom: 1px solid #1a1a30; }
.calib-table tbody tr:last-child td { border-bottom: none; }
.calib-chart-wrap { height: 150px; position: relative; margin-top: 0.5rem; }

/* ── SCANNER SECTOR HEADERS ── */
.sector-header td {
  background: var(--card2);
  color: var(--accent);
  font-size: 0.78rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  padding: 7px 15px;
  border-top: 1px solid var(--border);
}
.sector-header:first-child td { border-top: none; }
.sector-count {
  color: var(--muted);
  font-weight: 400;
  font-size: 0.72rem;
  margin-left: 0.5rem;
  text-transform: none;
  letter-spacing: 0;
}

/* ── EPS REVISION ROW ── */
.eps-row {
  padding: 0.45rem 1.15rem;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: baseline;
  gap: 0.55rem;
  flex-wrap: wrap;
  font-size: 0.78rem;
}
.eps-lbl {
  font-size: 0.63rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  flex-shrink: 0;
}
.eps-val { font-weight: 600; }
.eps-delta { font-size: 0.72rem; font-weight: 600; }

/* ── TECHNICAL SIGNALS ── */
.tech-row {
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  padding: 0.4rem 1.15rem;
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}
.tech-lbl {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  flex-shrink: 0;
}
.tech-badge {
  font-size: 0.7rem;
  font-weight: 600;
  padding: 1px 7px;
  border-radius: 100px;
  border: 1px solid currentColor;
}
.rsi-num { font-size: 0.78rem; font-weight: 700; }

/* ── SECTOR PEERS ── */
.peers-row {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.4rem 1.15rem;
  border-top: 1px solid var(--border);
  flex-wrap: wrap;
}
.peers-lbl {
  font-size: 0.64rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  flex-shrink: 0;
  margin-right: 0.15rem;
}
.peer-chip {
  font-size: 0.7rem;
  font-weight: 600;
  padding: 2px 8px;
  border-radius: 100px;
  border: 1px solid currentColor;
  white-space: nowrap;
}

/* ── DISCLAIMER ── */
.disclaimer {
  margin-top: 3rem;
  padding-top: 1rem;
  border-top: 1px solid var(--border);
  font-size: 0.7rem;
  color: #374151;
  text-align: center;
}

/* ── LIGHT MODE ── */
[data-theme="light"] {
  --bg:       #f8f9fc;
  --surface:  #ffffff;
  --card:     #ffffff;
  --card2:    #f1f3f9;
  --border:   #dde1ea;
  --accent:   #7c3aed;
  --text:     #0f172a;
  --muted:    #64748b;
  --green:    #16a34a;
  --red:      #dc2626;
  --yellow:   #b45309;
  --orange:   #c2410c;
}
[data-theme="light"] nav { background: #ffffff; }
[data-theme="light"] .mkt-strip { background: #f1f3f9; }
[data-theme="light"] .scan-table thead th,
[data-theme="light"] .outcome-table thead th,
[data-theme="light"] .cmp-table thead th { background: #f1f3f9; }
[data-theme="light"] .scan-table tbody td,
[data-theme="light"] .outcome-table tbody td,
[data-theme="light"] .cmp-table tbody td,
[data-theme="light"] .calib-table tbody td { border-bottom: 1px solid var(--border); }
[data-theme="light"] .filter-btn.active { background: #7c3aed22; }
[data-theme="light"] .disclaimer { color: #94a3b8; }
[data-theme="light"] .cat-item { color: #7c3aed; }
[data-theme="light"] .risk-item { color: #dc2626; }
[data-theme="light"] .ticker-card:hover { box-shadow: 0 0 0 1px var(--card-accent), 0 4px 16px #0000001a; }

/* ── THEME TOGGLE BUTTON ── */
.theme-toggle {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  font-size: 0.95rem;
  line-height: 1;
  width: 30px;
  height: 30px;
  border-radius: 100px;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s;
  margin-left: 0.5rem;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
}
.theme-toggle:hover { color: var(--text); border-color: var(--accent); }

/* ── URGENCY RING (imminent earnings) ── */
@keyframes urgency-pulse {
  0%, 100% { box-shadow: 0 0 0 0 #ef444455; }
  50%       { box-shadow: 0 0 0 8px #ef444400; }
}
.ticker-card.urgent-7  {
  animation: urgency-pulse 2s ease-in-out infinite;
  border-top: 2px solid #ef444488 !important;
}
.ticker-card.urgent-14 { border-top: 2px solid #f9731688 !important; }

/* ── OPTIONS SPIKE BADGE ── */
.opts-spike-badge {
  font-size: 0.68rem;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 100px;
  border: 1px solid currentColor;
  flex-shrink: 0;
  animation: spike-blink 1.8s ease-in-out infinite;
}
@keyframes spike-blink {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.5; }
}

/* ── POST-EARNINGS BANNER ── */
.post-earnings-banner {
  background: #0d0d1e;
  border-bottom: 1px solid var(--border);
  padding: 0.3rem 1.15rem;
  font-size: 0.72rem;
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.post-earnings-banner .peb-label {
  font-size: 0.65rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: #a78bfa;
  flex-shrink: 0;
}
.ticker-card.post-earnings { opacity: 0.82; }

/* ── MOVE PRICING ROW ── */
.move-price-row {
  padding: 0.4rem 1.15rem;
  border-top: 1px solid var(--border);
  font-size: 0.75rem;
  display: flex;
  align-items: baseline;
  gap: 0.5rem;
  flex-wrap: wrap;
}
.move-price-lbl {
  font-size: 0.63rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  flex-shrink: 0;
}

/* ── SCANNER WATCHLIST COPY BUTTON ── */
.add-wl-btn {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  font-size: 0.75rem;
  width: 20px;
  height: 20px;
  border-radius: 100px;
  cursor: pointer;
  margin-left: 0.4rem;
  transition: color 0.15s, border-color 0.15s;
  padding: 0;
  line-height: 1;
  vertical-align: middle;
}
.add-wl-btn:hover { color: var(--accent); border-color: var(--accent); }

/* ── MOBILE RESPONSIVE ── */
@media (max-width: 768px) {
  main { padding: 1.25rem 0.85rem 4rem; }
  .wl-grid { grid-template-columns: 1fr; }
  .metrics-grid { grid-template-columns: 1fr; }
  .chart-row  { grid-template-columns: 1fr; }
  .chart-cell { border-right: none !important; border-bottom: 1px solid var(--border); }
  .chart-cell:last-child { border-bottom: none; }
  .metric-cell:nth-child(2n) { border-right: 1px solid var(--border); }
  .metric-cell:nth-last-child(-n+2) { border-bottom: 1px solid var(--border); }
  .metric-cell:last-child { border-bottom: none; }
  .nav-ts { display: none; }
  .scan-table { font-size: 0.78rem; }
  .scan-table thead th, .scan-table tbody td { padding: 7px 8px; }
}
@media (max-width: 480px) {
  nav { padding: 0 0.6rem; gap: 0; overflow-x: auto; }
  nav a { padding: 0 0.6rem; font-size: 0.75rem; }
  .section-header h2 .sub { display: none; }
  .filter-bar { flex-wrap: wrap; }
  .sort-select { margin-left: 0; width: 100%; }
  .mkt-strip { padding: 0 0.85rem; }
}

/* ── LOGIN OVERLAY ── */
#login-overlay {
  position: fixed;
  inset: 0;
  background: var(--bg);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
}
.login-box {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 2.5rem 2.5rem 2rem;
  width: min(340px, 90vw);
  text-align: center;
  box-shadow: 0 8px 48px #00000066;
}
.login-brand {
  font-size: 1rem;
  font-weight: 800;
  color: var(--accent);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  margin-bottom: 0.3rem;
}
.login-brand .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); }
.login-sub {
  font-size: 0.78rem;
  color: var(--muted);
  margin-bottom: 1.6rem;
}
#login-input {
  width: 100%;
  background: var(--bg);
  border: 1px solid var(--border);
  color: var(--text);
  font-size: 0.92rem;
  padding: 0.65rem 0.9rem;
  border-radius: 8px;
  outline: none;
  transition: border-color 0.15s;
  margin-bottom: 0.75rem;
  font-family: inherit;
  display: block;
}
#login-input:focus { border-color: var(--accent); }
#login-btn {
  width: 100%;
  background: var(--accent);
  color: #fff;
  border: none;
  font-size: 0.9rem;
  font-weight: 700;
  padding: 0.65rem;
  border-radius: 8px;
  cursor: pointer;
  transition: opacity 0.15s;
  font-family: inherit;
  letter-spacing: 0.02em;
}
#login-btn:hover { opacity: 0.85; }
.login-error {
  font-size: 0.75rem;
  color: var(--red);
  margin-top: 0.6rem;
  min-height: 1.1em;
}
@keyframes login-shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-7px); }
  40%, 80% { transform: translateX(7px); }
}
.login-box.shake { animation: login-shake 0.42s ease; }

/* ── DELTA ROW (changes since last run) ── */
.delta-row {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  padding: 0.3rem 1.15rem;
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
  background: #090916;
}
.delta-lbl {
  font-size: 0.62rem;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  color: var(--muted);
  flex-shrink: 0;
  margin-right: 0.1rem;
}
.delta-chip {
  font-size: 0.7rem;
  font-weight: 600;
  padding: 1px 7px;
  border-radius: 100px;
  border: 1px solid currentColor;
  white-space: nowrap;
}
[data-theme="light"] .delta-row { background: #f1f3f9; }

/* ── TWO-PANEL COMMAND CENTER LAYOUT ── */

/* Override body for app-shell layout */
body { display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

/* Reset existing main styles for new layout */
main#main-panel { max-width: none !important; margin: 0 !important; padding: 0 !important; }

/* App shell (rail + main) */
#app { display: flex; flex: 1; overflow: hidden; }

/* Left Rail */
#rail {
  width: 260px;
  min-width: 260px;
  background: var(--surface);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  flex-shrink: 0;
}
#rail-header { padding: 1rem; border-bottom: 1px solid var(--border); flex-shrink: 0; }
.rail-brand { font-size: .85rem; font-weight: 700; letter-spacing: .08em; color: var(--accent); }
.rail-date   { font-size: .7rem; color: var(--muted); margin-top: .2rem; }

/* Suppress old nav styles on ticker-list nav */
nav#ticker-list {
  position: static !important;
  background: transparent !important;
  border-bottom: none !important;
  padding: .5rem 0 !important;
  gap: 0 !important;
  flex: 1;
  overflow-y: auto;
  display: block !important;
}

/* Rail ticker items */
.rail-item {
  padding: .65rem 1rem;
  cursor: pointer;
  border-left: 3px solid transparent;
  transition: background .15s;
}
.rail-item:hover   { background: var(--card); }
.rail-item.active  { background: var(--card); border-left-color: var(--accent); }
.rail-row1 { display: flex; align-items: center; gap: .5rem; }
.rail-sym  { font-weight: 700; font-size: .95rem; flex: 1; }
.rail-days { font-size: .68rem; color: var(--muted); white-space: nowrap; }
.rail-mini-bar {
  height: 4px;
  background: var(--border);
  border-radius: 2px;
  margin: .3rem 0 .2rem;
  position: relative;
}
.rail-mini-fill { height: 4px; border-radius: 2px; position: absolute; top: 0; }
.rail-badge {
  font-size: .6rem;
  font-weight: 700;
  padding: .15rem .35rem;
  border-radius: 3px;
  text-transform: uppercase;
  letter-spacing: .05em;
}

/* Rail footer */
#rail-footer {
  border-top: 1px solid var(--border);
  padding: .75rem;
  display: flex;
  flex-direction: column;
  gap: .4rem;
  flex-shrink: 0;
}
.rail-nav-btn {
  width: 100%;
  padding: .5rem;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text);
  cursor: pointer;
  font-size: .78rem;
  text-align: left;
  transition: background .15s;
  font-family: inherit;
}
.rail-nav-btn:hover, .rail-nav-btn.active { background: var(--card2); }

/* Main panel */
#main-panel { flex: 1; overflow-y: auto; background: var(--bg); }
.deep-dive  { display: none; padding: 1.5rem 2rem; max-width: 1100px; }
.deep-dive.visible { display: block; }

/* AI Briefing card */
.briefing-card {
  background: var(--card);
  border: 1px solid #3730a3;
  border-left: 4px solid var(--accent);
  border-radius: 10px;
  padding: 1rem 1.25rem;
  margin-bottom: 1.25rem;
  font-size: .88rem;
  line-height: 1.6;
  color: var(--text);
}
.briefing-label {
  font-size: .65rem;
  font-weight: 700;
  letter-spacing: .1em;
  color: var(--accent);
  text-transform: uppercase;
  margin-bottom: .4rem;
}

/* Deep dive header */
.dd-header { display: flex; align-items: center; gap: .75rem; margin-bottom: 1.25rem; flex-wrap: wrap; }
.dd-symbol  { font-size: 2rem; font-weight: 900; letter-spacing: -.02em; }

/* Hero metrics strip */
.hero-metrics { display: flex; gap: .75rem; margin-bottom: 1.25rem; flex-wrap: wrap; }
.hero-chip {
  padding: .5rem 1rem;
  border-radius: 8px;
  font-size: .78rem;
  border: 1px solid var(--border);
  background: var(--card);
}
.hero-chip .hc-label { color: var(--muted); font-size: .65rem; display: block; margin-bottom: .15rem; }
.hero-chip .hc-val   { font-weight: 700; font-size: 1rem; }

/* Lightweight Charts container */
.lw-chart-wrap {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .75rem;
  margin-bottom: 1.25rem;
}
.lw-chart-title {
  font-size: .72rem;
  color: var(--muted);
  margin-bottom: .5rem;
  font-weight: 600;
  letter-spacing: .06em;
  text-transform: uppercase;
}
.lw-chart { width: 100%; height: 340px; }

/* Signal timeline */
.timeline-wrap {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: .75rem;
  margin-bottom: 1.25rem;
}
.timeline-canvas { width: 100% !important; height: 90px !important; }

/* Factor grid */
.factor-grid-dd {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: .5rem;
  margin-bottom: 1.25rem;
}
.factor-cell-dd {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: .6rem .7rem;
  text-align: center;
}
.factor-cell-dd .fc-name { font-size: .62rem; color: var(--muted); margin-bottom: .3rem; }
.factor-cell-dd .fc-bar  { height: 4px; background: var(--border); border-radius: 2px; margin-bottom: .3rem; position: relative; }
.factor-cell-dd .fc-fill { height: 4px; border-radius: 2px; position: absolute; top: 0; }
.factor-cell-dd .fc-val  { font-size: .82rem; font-weight: 700; }

/* Deep dive metrics grid */
.dd-metrics-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  border: 1px solid var(--border);
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 1.25rem;
}
.dd-metrics-grid .metric-cell { border-bottom: 1px solid var(--border); border-right: 1px solid var(--border); }
.dd-metrics-grid .metric-cell:nth-child(2n) { border-right: none; }
.dd-metrics-grid .metric-cell:nth-last-child(-n+2) { border-bottom: none; }

/* Status bar (fixed bottom) */
#status-bar {
  height: 32px;
  background: var(--surface);
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 1rem;
  gap: 1.5rem;
  font-size: .7rem;
  color: var(--muted);
  flex-shrink: 0;
  z-index: 200;
}
.sb-sep { color: var(--border); }
.sb-mkt { color: var(--text); font-weight: 600; }
#sb-theme-btn {
  margin-left: auto;
  background: transparent;
  border: 1px solid var(--border);
  color: var(--muted);
  padding: .2rem .6rem;
  border-radius: 4px;
  cursor: pointer;
  font-size: .7rem;
  font-family: inherit;
  transition: color .15s, border-color .15s;
}
#sb-theme-btn:hover { color: var(--text); border-color: var(--accent); }

/* Command palette */
#cmd-overlay {
  position: fixed;
  inset: 0;
  background: #00000088;
  z-index: 8000;
  display: none;
  align-items: flex-start;
  justify-content: center;
  padding-top: 15vh;
}
#cmd-overlay.open { display: flex; }
#cmd-box {
  background: var(--card);
  border: 1px solid var(--accent);
  border-radius: 12px;
  width: min(480px, 90vw);
  overflow: hidden;
}
#cmd-input {
  width: 100%;
  box-sizing: border-box;
  padding: .9rem 1.1rem;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--border);
  color: var(--text);
  font-size: .95rem;
  outline: none;
  font-family: inherit;
}
#cmd-results { max-height: 260px; overflow-y: auto; }
.cmd-result {
  padding: .6rem 1.1rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: .75rem;
  font-size: .85rem;
}
.cmd-result:hover, .cmd-result.focused { background: var(--card2); }
.cmd-result .cr-sym { font-weight: 700; width: 60px; }
.cmd-result .cr-badge { font-size: .6rem; }

/* Panel sections (discoveries, track-record) */
.panel-section { display: none; padding: 1.5rem 2rem; }
.panel-section.visible { display: block; }
.panel-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 1rem; color: var(--text); }

/* Light mode overrides for new elements */
[data-theme="light"] .rail-item.active { background: var(--card2); }
[data-theme="light"] #status-bar { background: var(--surface); }
[data-theme="light"] #cmd-box { background: var(--card); }
[data-theme="light"] .briefing-card { border-color: #c4b5fd; }
</style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <script src="https://unpkg.com/lightweight-charts@4.1.3/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>


<div id="app">

  <!-- ═══ LEFT RAIL ═══ -->
  <aside id="rail">
    <div id="rail-header">
      <div class="rail-brand">&#9675; Pre-Earnings Dashboard</div>
      <div class="rail-date">2026-02-27 &middot; 5 tickers</div>
    </div>
    <nav id="ticker-list">
<div class="rail-item active" data-ticker="LLY"><div class="rail-row1"><span class="rail-sym">LLY</span><span class="rail-days" style="color:#a5b4fc">62d</span></div><div class="rail-mini-bar"><div class="rail-mini-fill" style="left:47.0%;width:3.0%;background:#facc1588"></div></div><div style="display:flex;align-items:center;justify-content:space-between"><span class="rail-badge" style="color:#facc15;background:#422006;border:1px solid #facc1544">Hold</span><span style="font-size:.7rem;font-weight:700;color:#facc15">-6</span></div></div>
<div class="rail-item" data-ticker="NVO"><div class="rail-row1"><span class="rail-sym">NVO</span><span class="rail-days" style="color:#a5b4fc">68d</span></div><div class="rail-mini-bar"><div class="rail-mini-fill" style="left:39.0%;width:11.0%;background:#facc1588"></div></div><div style="display:flex;align-items:center;justify-content:space-between"><span class="rail-badge" style="color:#facc15;background:#422006;border:1px solid #facc1544">Hold</span><span style="font-size:.7rem;font-weight:700;color:#facc15">-22</span></div></div>
<div class="rail-item" data-ticker="CRM"><div class="rail-row1"><span class="rail-sym">CRM</span><span class="rail-days" style="color:#ef4444">Post</span></div><div class="rail-mini-bar"><div class="rail-mini-fill" style="left:48.5%;width:1.5%;background:#facc1588"></div></div><div style="display:flex;align-items:center;justify-content:space-between"><span class="rail-badge" style="color:#facc15;background:#422006;border:1px solid #facc1544">Hold</span><span style="font-size:.7rem;font-weight:700;color:#facc15">-3</span></div></div>
<div class="rail-item" data-ticker="GOOG"><div class="rail-row1"><span class="rail-sym">GOOG</span><span class="rail-days" style="color:#a5b4fc">55d</span></div><div class="rail-mini-bar"><div class="rail-mini-fill" style="left:45.5%;width:4.5%;background:#facc1588"></div></div><div style="display:flex;align-items:center;justify-content:space-between"><span class="rail-badge" style="color:#facc15;background:#422006;border:1px solid #facc1544">Hold</span><span style="font-size:.7rem;font-weight:700;color:#facc15">-9</span></div></div>
<div class="rail-item" data-ticker="RNMBY"><div class="rail-row1"><span class="rail-sym">RNMBY</span><span class="rail-days" style="color:#f97316">12d</span></div><div class="rail-mini-bar"><div class="rail-mini-fill" style="left:49.5%;width:0.5%;background:#facc1588"></div></div><div style="display:flex;align-items:center;justify-content:space-between"><span class="rail-badge" style="color:#facc15;background:#422006;border:1px solid #facc1544">Hold</span><span style="font-size:.7rem;font-weight:700;color:#facc15">-1</span></div></div>
    </nav>
    <div id="rail-footer">
      <button class="rail-nav-btn" data-panel="discoveries">Discoveries (20)</button>
      <button class="rail-nav-btn" data-panel="track-record">Track Record (1)</button>
    </div>
  </aside>

  <!-- ═══ MAIN PANEL ═══ -->
  <main id="main-panel">

<div class="deep-dive visible" id="dd-LLY" data-ticker="LLY"><div class="dd-header"><span class="dd-symbol" style="color:#facc15">LLY</span><span class="action-badge" style="color:#facc15;border-color:#facc1544;background:#422006">Hold</span><span class="earnings-chip" style="color:#a5b4fc;border-color:#a5b4fc22;background:#a5b4fc11">2026-04-30 · 62d</span></div><div class="briefing-card"><div class="briefing-label">AI Briefing</div><span style="color:var(--muted)">AI briefing unavailable — set ANTHROPIC_API_KEY to enable.</span></div><div class="hero-metrics"><div class="hero-chip"><span class="hc-label">Score</span><span class="hc-val" style="color:#facc15">-6</span></div><div class="hero-chip"><span class="hc-label">Action</span><span class="hc-val" style="color:#facc15">Hold</span></div><div class="hero-chip"><span class="hc-label">Risk</span><span class="hc-val" style="color:#22c55e">Low</span></div><div class="hero-chip"><span class="hc-label">Earnings</span><span class="hc-val" style="color:#a5b4fc">2026-04-30 · 62d</span></div></div><div class="lw-chart-wrap"><div class="lw-chart-title">Price Chart — 30d</div><div class="lw-chart" id="lwc-LLY" data-ohlc='[{"time": "2026-02-04", "open": 1081.92, "high": 1082.51, "low": 1061.25, "close": 1062.52}, {"time": "2026-02-05", "open": 1060.44, "high": 1065.3, "low": 1041.58, "close": 1060.98}, {"time": "2026-02-06", "open": 1062.34, "high": 1071.6, "low": 1033.09, "close": 1037.78}, {"time": "2026-02-07", "open": 1027.4, "high": 1027.97, "low": 1002.47, "close": 1022.09}, {"time": "2026-02-08", "open": 1023.65, "high": 1038.27, "low": 1016.3, "close": 1022.43}, {"time": "2026-02-09", "open": 1031.58, "high": 1046.82, "low": 1018.3, "close": 1035.42}, {"time": "2026-02-10", "open": 1035.84, "high": 1055.65, "low": 1035.84, "close": 1042.39}, {"time": "2026-02-11", "open": 1039.02, "high": 1047.05, "low": 991.92, "close": 1001.79}, {"time": "2026-02-12", "open": 1073.33, "high": 1112.14, "low": 1063.23, "close": 1105.28}, {"time": "2026-02-13", "open": 1063.72, "high": 1073.21, "low": 1004.15, "close": 1019.14}, {"time": "2026-02-14", "open": 1054.24, "high": 1058.25, "low": 1031.55, "close": 1056.42}, {"time": "2026-02-15", "open": 1075.3, "high": 1105.1, "low": 1041.18, "close": 1042.93}, {"time": "2026-02-16", "open": 1048.91, "high": 1053.89, "low": 1022.17, "close": 1023.29}, {"time": "2026-02-17", "open": 1024.79, "high": 1028.38, "low": 1010.93, "close": 1013.52}, {"time": "2026-02-18", "open": 1023.16, "high": 1058.07, "low": 1010.31, "close": 1036.54}, {"time": "2026-02-19", "open": 1039.98, "high": 1064.34, "low": 1033.69, "close": 1040.0}, {"time": "2026-02-20", "open": 1045.61, "high": 1067.0, "low": 1034.88, "close": 1036.05}, {"time": "2026-02-21", "open": 1032.36, "high": 1037.54, "low": 1011.31, "close": 1020.56}, {"time": "2026-02-22", "open": 1010.82, "high": 1025.23, "low": 1007.0, "close": 1023.22}, {"time": "2026-02-23", "open": 1023.86, "high": 1028.65, "low": 1002.46, "close": 1009.52}, {"time": "2026-02-24", "open": 1047.02, "high": 1064.45, "low": 1034.0, "close": 1058.56}, {"time": "2026-02-25", "open": 1042.95, "high": 1058.9, "low": 1024.08, "close": 1042.15}, {"time": "2026-02-26", "open": 1036.58, "high": 1053.63, "low": 1027.0, "close": 1028.83}, {"time": "2026-02-27", "open": 1024.08, "high": 1026.92, "low": 1007.38, "close": 1022.02}]' data-close='[1062.52, 1060.98, 1037.78, 1022.09, 1022.43, 1035.42, 1042.39, 1001.79, 1105.28, 1019.14, 1056.42, 1042.93, 1023.29, 1013.52, 1036.54, 1040.0, 1036.05, 1020.56, 1023.22, 1009.52, 1058.56, 1042.15, 1028.83, 1022.02]' data-dates='["2026-02-04", "2026-02-05", "2026-02-06", "2026-02-07", "2026-02-08", "2026-02-09", "2026-02-10", "2026-02-11", "2026-02-12", "2026-02-13", "2026-02-14", "2026-02-15", "2026-02-16", "2026-02-17", "2026-02-18", "2026-02-19", "2026-02-20", "2026-02-21", "2026-02-22", "2026-02-23", "2026-02-24", "2026-02-25", "2026-02-26", "2026-02-27"]' data-exp-move="1.0" data-earnings-date="2026-04-30"></div></div><div class="factor-grid-dd"><div class="factor-cell-dd"><div class="fc-name">Sentiment</div><div class="fc-bar"><div class="fc-fill" style="left:49.0%;width:1.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-2</div></div><div class="factor-cell-dd"><div class="fc-name">Regime</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Insider</div><div class="fc-bar"><div class="fc-fill" style="left:0.0%;width:50.0%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-100</div></div><div class="factor-cell-dd"><div class="fc-name">Attention</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Price</div><div class="fc-bar"><div class="fc-fill" style="left:40.5%;width:9.6%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-19</div></div><div class="factor-cell-dd"><div class="fc-name">Timing</div><div class="fc-bar"><div class="fc-fill" style="left:35.0%;width:15.0%;background:#f8717188"></div></div><div class="fc-val" style="color:#f87171">-30</div></div><div class="factor-cell-dd"><div class="fc-name">Backtest</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:37.5%;background:#22c55e88"></div></div><div class="fc-val" style="color:#22c55e">+75</div></div><div class="factor-cell-dd"><div class="fc-name">Patterns</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">CEO</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:9.2%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+18</div></div><div class="factor-cell-dd"><div class="fc-name">Options</div><div class="fc-bar"><div class="fc-fill" style="left:43.1%;width:6.8%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-14</div></div></div><div class="dd-metrics-grid">
  <div class="metric-cell">
    <div class="metric-lbl">Sentiment</div>
    <div class="metric-val" style="color:#22c55e">Bullish</div>
    <div class="sent-bar">
      <div class="sb-g" style="width:33%"></div>
      <div class="sb-r" style="width:25%"></div>
      <div class="sb-n" style="flex:1"></div>
    </div>
    <div class="metric-sub">33% bull · 25% bear · 142 headlines · FinBERT -0.11</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Options Flow</div>
    <div class="metric-val" style="color:#ef4444">P/C 1.14</div>
    <div class="metric-sub">Neutral · exp 2026-02-27 · ±1.0% exp · IV 29% · HV 53% · IV/HV <span style="color:#22c55e;font-weight:700">0.55x Cheap</span></div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">CEO Quality</div>
    <div class="metric-val">David A. Ricks</div>
    <div class="metric-sub">Beat 75% · non-STEM · score 18.40</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Insider Activity</div>
    <div class="metric-val" style="color:#9ca3af">Unknown</div>
    <div class="metric-sub">Net buy ratio +0%</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Google Trends</div>
    <div class="metric-val">—</div>
    <div class="metric-sub">— </div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">30d Run-Up</div>
    <div class="metric-val" style="color:#ef4444">—</div>
    <div class="metric-sub">Risk: <span style="color:#22c55e">Low</span></div>
  </div>
</div><div class="catalysts-section"><div class="cat-title">Key Catalysts &amp; Signals</div><div class="cat-item"><span class="arr">›</span>Period price change: -3.8%</div><div class="cat-item"><span class="arr">›</span>Backtest confidence: 75/100 (High)</div><div class="cat-item"><span class="arr">›</span>CEO David A. Ricks: 75% earnings beat rate, guidance accuracy 0.40, non-STEM education</div><div class="cat-item"><span class="arr">›</span>Options P/C ratio: 1.14 (Neutral) — calls 3,533 / puts 4,017 (expiry 2026-02-27)</div></div></div>
<div class="deep-dive" id="dd-NVO" data-ticker="NVO"><div class="dd-header"><span class="dd-symbol" style="color:#facc15">NVO</span><span class="action-badge" style="color:#facc15;border-color:#facc1544;background:#422006">Hold</span><span class="earnings-chip" style="color:#a5b4fc;border-color:#a5b4fc22;background:#a5b4fc11">2026-05-06 · 68d</span></div><div class="briefing-card"><div class="briefing-label">AI Briefing</div><span style="color:var(--muted)">AI briefing unavailable — set ANTHROPIC_API_KEY to enable.</span></div><div class="hero-metrics"><div class="hero-chip"><span class="hc-label">Score</span><span class="hc-val" style="color:#facc15">-22</span></div><div class="hero-chip"><span class="hc-label">Action</span><span class="hc-val" style="color:#facc15">Hold</span></div><div class="hero-chip"><span class="hc-label">Risk</span><span class="hc-val" style="color:#22c55e">Low</span></div><div class="hero-chip"><span class="hc-label">Earnings</span><span class="hc-val" style="color:#a5b4fc">2026-05-06 · 68d</span></div></div><div class="lw-chart-wrap"><div class="lw-chart-title">Price Chart — 30d</div><div class="lw-chart" id="lwc-NVO" data-ohlc='[{"time": "2026-02-04", "open": 63.4, "high": 64.16, "low": 62.03, "close": 62.26}, {"time": "2026-02-05", "open": 62.88, "high": 64.0, "low": 62.68, "close": 63.98}, {"time": "2026-02-06", "open": 62.89, "high": 63.49, "low": 62.49, "close": 62.89}, {"time": "2026-02-07", "open": 61.48, "high": 61.56, "low": 59.99, "close": 60.33}, {"time": "2026-02-08", "open": 59.93, "high": 59.93, "low": 58.8, "close": 59.33}, {"time": "2026-02-09", "open": 59.27, "high": 59.91, "low": 58.59, "close": 59.43}, {"time": "2026-02-10", "open": 57.91, "high": 59.3, "low": 57.79, "close": 58.93}, {"time": "2026-02-11", "open": 58.35, "high": 58.64, "low": 49.96, "close": 50.3}, {"time": "2026-02-12", "open": 47.95, "high": 49.1, "low": 46.47, "close": 47.19}, {"time": "2026-02-13", "open": 45.05, "high": 45.67, "low": 43.24, "close": 43.34}, {"time": "2026-02-14", "open": 46.37, "high": 47.74, "low": 45.84, "close": 47.64}, {"time": "2026-02-15", "open": 50.13, "high": 51.09, "low": 49.01, "close": 49.37}, {"time": "2026-02-16", "open": 50.02, "high": 50.46, "low": 48.98, "close": 49.12}, {"time": "2026-02-17", "open": 48.73, "high": 48.96, "low": 48.08, "close": 48.74}, {"time": "2026-02-18", "open": 48.85, "high": 50.07, "low": 48.12, "close": 48.93}, {"time": "2026-02-19", "open": 49.3, "high": 49.84, "low": 49.2, "close": 49.57}, {"time": "2026-02-20", "open": 49.11, "high": 49.85, "low": 48.68, "close": 49.37}, {"time": "2026-02-21", "open": 48.84, "high": 49.36, "low": 48.63, "close": 49.23}, {"time": "2026-02-22", "open": 48.72, "high": 48.77, "low": 48.18, "close": 48.45}, {"time": "2026-02-23", "open": 47.69, "high": 47.75, "low": 47.03, "close": 47.42}, {"time": "2026-02-24", "open": 40.19, "high": 41.09, "low": 39.34, "close": 39.63}, {"time": "2026-02-25", "open": 38.5, "high": 39.07, "low": 38.36, "close": 38.59}, {"time": "2026-02-26", "open": 37.71, "high": 38.24, "low": 37.65, "close": 38.16}, {"time": "2026-02-27", "open": 37.83, "high": 38.07, "low": 37.31, "close": 37.62}]' data-close='[62.26, 63.98, 62.89, 60.33, 59.33, 59.43, 58.93, 50.3, 47.19, 43.34, 47.64, 49.37, 49.12, 48.74, 48.93, 49.57, 49.37, 49.23, 48.45, 47.42, 39.63, 38.59, 38.16, 37.62]' data-dates='["2026-02-04", "2026-02-05", "2026-02-06", "2026-02-07", "2026-02-08", "2026-02-09", "2026-02-10", "2026-02-11", "2026-02-12", "2026-02-13", "2026-02-14", "2026-02-15", "2026-02-16", "2026-02-17", "2026-02-18", "2026-02-19", "2026-02-20", "2026-02-21", "2026-02-22", "2026-02-23", "2026-02-24", "2026-02-25", "2026-02-26", "2026-02-27"]' data-exp-move="1.3" data-earnings-date="2026-05-06"></div></div><div class="factor-grid-dd"><div class="factor-cell-dd"><div class="fc-name">Sentiment</div><div class="fc-bar"><div class="fc-fill" style="left:48.2%;width:1.8%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-4</div></div><div class="factor-cell-dd"><div class="fc-name">Regime</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Insider</div><div class="fc-bar"><div class="fc-fill" style="left:0.0%;width:50.0%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-100</div></div><div class="factor-cell-dd"><div class="fc-name">Attention</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Price</div><div class="fc-bar"><div class="fc-fill" style="left:0.0%;width:50.0%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-100</div></div><div class="factor-cell-dd"><div class="fc-name">Timing</div><div class="fc-bar"><div class="fc-fill" style="left:35.0%;width:15.0%;background:#f8717188"></div></div><div class="fc-val" style="color:#f87171">-30</div></div><div class="factor-cell-dd"><div class="fc-name">Backtest</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:31.0%;background:#22c55e88"></div></div><div class="fc-val" style="color:#22c55e">+62</div></div><div class="factor-cell-dd"><div class="fc-name">Patterns</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">CEO</div><div class="fc-bar"><div class="fc-fill" style="left:40.2%;width:9.8%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-20</div></div><div class="factor-cell-dd"><div class="fc-name">Options</div><div class="fc-bar"><div class="fc-fill" style="left:0.0%;width:50.0%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-100</div></div></div><div class="dd-metrics-grid">
  <div class="metric-cell">
    <div class="metric-lbl">Sentiment</div>
    <div class="metric-val" style="color:#9ca3af">Neutral</div>
    <div class="sent-bar">
      <div class="sb-g" style="width:30%"></div>
      <div class="sb-r" style="width:32%"></div>
      <div class="sb-n" style="flex:1"></div>
    </div>
    <div class="metric-sub">30% bull · 32% bear · 146 headlines · FinBERT -0.17</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Options Flow</div>
    <div class="metric-val" style="color:#ef4444">P/C 4.25</div>
    <div class="metric-sub">Heavily Bearish · exp 2026-02-27 · ±1.3% exp · IV 32% · HV 91% · IV/HV <span style="color:#22c55e;font-weight:700">0.35x Cheap</span></div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">CEO Quality</div>
    <div class="metric-val">Maziar Mike Doustdar</div>
    <div class="metric-sub">Beat 69% · non-STEM · score -19.60</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Insider Activity</div>
    <div class="metric-val" style="color:#9ca3af">Unknown</div>
    <div class="metric-sub">Net buy ratio +0%</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Google Trends</div>
    <div class="metric-val">—</div>
    <div class="metric-sub">— </div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">30d Run-Up</div>
    <div class="metric-val" style="color:#ef4444">—</div>
    <div class="metric-sub">Risk: <span style="color:#22c55e">Low</span></div>
  </div>
</div><div class="catalysts-section"><div class="cat-title">Key Catalysts &amp; Signals</div><div class="cat-item"><span class="arr">›</span>Period price change: -39.6%</div><div class="cat-item"><span class="arr">›</span>Backtest confidence: 62/100 (Medium)</div><div class="cat-item"><span class="arr">›</span>CEO Maziar Mike Doustdar: 69% earnings beat rate, guidance accuracy 0.49, non-STEM education</div><div class="cat-item"><span class="arr">›</span>Options P/C ratio: 4.25 (Heavily Bearish) — calls 7,384 / puts 31,371 (expiry 2026-02-27)</div></div><div class="risk-section"><div class="risk-title">Risk Flags</div><div class="risk-item">RISK: Elevated put/call ratio (4.25) — options market positioned bearishly</div></div></div>
<div class="deep-dive" id="dd-CRM" data-ticker="CRM"><div class="dd-header"><span class="dd-symbol" style="color:#facc15">CRM</span><span class="action-badge" style="color:#facc15;border-color:#facc1544;background:#422006">Hold</span><span class="earnings-chip" style="color:#6b7280;border-color:#6b728022;background:#6b728011">Post-Earnings · 2d ago</span></div><div class="briefing-card"><div class="briefing-label">AI Briefing</div><span style="color:var(--muted)">AI briefing unavailable — set ANTHROPIC_API_KEY to enable.</span></div><div class="hero-metrics"><div class="hero-chip"><span class="hc-label">Score</span><span class="hc-val" style="color:#facc15">-3</span></div><div class="hero-chip"><span class="hc-label">Action</span><span class="hc-val" style="color:#facc15">Hold</span></div><div class="hero-chip"><span class="hc-label">Risk</span><span class="hc-val" style="color:#22c55e">Low</span></div><div class="hero-chip"><span class="hc-label">Earnings</span><span class="hc-val" style="color:#6b7280">Post-Earnings · 2d ago</span></div></div><div class="lw-chart-wrap"><div class="lw-chart-title">Price Chart — 30d</div><div class="lw-chart" id="lwc-CRM" data-ohlc='[{"time": "2026-02-04", "open": 226.78, "high": 230.85, "low": 226.65, "close": 228.05}, {"time": "2026-02-05", "open": 229.43, "high": 230.95, "low": 227.59, "close": 229.4}, {"time": "2026-02-06", "open": 231.94, "high": 235.74, "low": 226.27, "close": 228.53}, {"time": "2026-02-07", "open": 229.39, "high": 231.86, "low": 227.67, "close": 227.96}, {"time": "2026-02-08", "open": 216.67, "high": 217.28, "low": 208.78, "close": 214.08}, {"time": "2026-02-09", "open": 214.16, "high": 215.55, "low": 211.03, "close": 212.29}, {"time": "2026-02-10", "open": 214.35, "high": 216.89, "low": 209.8, "close": 210.81}, {"time": "2026-02-11", "open": 205.0, "high": 205.56, "low": 193.11, "close": 196.38}, {"time": "2026-02-12", "open": 193.31, "high": 200.67, "low": 187.28, "close": 199.44}, {"time": "2026-02-13", "open": 193.99, "high": 199.56, "low": 188.79, "close": 189.97}, {"time": "2026-02-14", "open": 191.63, "high": 194.6, "low": 187.12, "close": 191.35}, {"time": "2026-02-15", "open": 189.3, "high": 195.2, "low": 185.73, "close": 194.03}, {"time": "2026-02-16", "open": 191.9, "high": 199.1, "low": 190.75, "close": 193.45}, {"time": "2026-02-17", "open": 193.15, "high": 193.67, "low": 181.81, "close": 185.0}, {"time": "2026-02-18", "open": 185.96, "high": 188.32, "low": 180.24, "close": 185.43}, {"time": "2026-02-19", "open": 186.44, "high": 193.45, "low": 184.3, "close": 189.72}, {"time": "2026-02-20", "open": 190.97, "high": 193.0, "low": 183.17, "close": 184.29}, {"time": "2026-02-21", "open": 183.88, "high": 188.14, "low": 181.86, "close": 187.79}, {"time": "2026-02-22", "open": 186.6, "high": 186.95, "low": 183.23, "close": 185.29}, {"time": "2026-02-23", "open": 185.32, "high": 191.73, "low": 183.73, "close": 185.16}, {"time": "2026-02-24", "open": 181.27, "high": 182.47, "low": 174.57, "close": 178.16}, {"time": "2026-02-25", "open": 177.64, "high": 188.67, "low": 176.28, "close": 185.42}, {"time": "2026-02-26", "open": 183.0, "high": 192.6, "low": 182.26, "close": 191.75}, {"time": "2026-02-27", "open": 196.76, "high": 201.04, "low": 191.33, "close": 199.47}]' data-close='[228.05, 229.4, 228.53, 227.96, 214.08, 212.29, 210.81, 196.38, 199.44, 189.97, 191.35, 194.03, 193.45, 185.0, 185.43, 189.72, 184.29, 187.79, 185.29, 185.16, 178.16, 185.42, 191.75, 199.47]' data-dates='["2026-02-04", "2026-02-05", "2026-02-06", "2026-02-07", "2026-02-08", "2026-02-09", "2026-02-10", "2026-02-11", "2026-02-12", "2026-02-13", "2026-02-14", "2026-02-15", "2026-02-16", "2026-02-17", "2026-02-18", "2026-02-19", "2026-02-20", "2026-02-21", "2026-02-22", "2026-02-23", "2026-02-24", "2026-02-25", "2026-02-26", "2026-02-27"]' data-exp-move="1.4" data-earnings-date="2026-02-25"></div></div><div class="factor-grid-dd"><div class="factor-cell-dd"><div class="fc-name">Sentiment</div><div class="fc-bar"><div class="fc-fill" style="left:47.8%;width:2.2%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-4</div></div><div class="factor-cell-dd"><div class="fc-name">Regime</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Insider</div><div class="fc-bar"><div class="fc-fill" style="left:0.0%;width:50.0%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-100</div></div><div class="factor-cell-dd"><div class="fc-name">Attention</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Price</div><div class="fc-bar"><div class="fc-fill" style="left:18.6%;width:31.4%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-63</div></div><div class="factor-cell-dd"><div class="fc-name">Timing</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:40.0%;background:#22c55e88"></div></div><div class="fc-val" style="color:#22c55e">+80</div></div><div class="factor-cell-dd"><div class="fc-name">Backtest</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:27.5%;background:#4ade8088"></div></div><div class="fc-val" style="color:#4ade80">+55</div></div><div class="factor-cell-dd"><div class="fc-name">Patterns</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">CEO</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:6.2%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+12</div></div><div class="factor-cell-dd"><div class="fc-name">Options</div><div class="fc-bar"><div class="fc-fill" style="left:29.2%;width:20.8%;background:#f8717188"></div></div><div class="fc-val" style="color:#f87171">-42</div></div></div><div class="dd-metrics-grid">
  <div class="metric-cell">
    <div class="metric-lbl">Sentiment</div>
    <div class="metric-val" style="color:#9ca3af">Neutral</div>
    <div class="sent-bar">
      <div class="sb-g" style="width:30%"></div>
      <div class="sb-r" style="width:32%"></div>
      <div class="sb-n" style="flex:1"></div>
    </div>
    <div class="metric-sub">30% bull · 32% bear · 145 headlines · FinBERT -0.20</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Options Flow</div>
    <div class="metric-val" style="color:#ef4444">P/C 1.42</div>
    <div class="metric-sub">Bearish · exp 2026-02-27 · ±1.4% exp · IV 37% · HV 49% · IV/HV <span style="color:#22c55e;font-weight:700">0.75x Cheap</span></div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">CEO Quality</div>
    <div class="metric-val">Marc R. Benioff</div>
    <div class="metric-sub">Beat 94% · STEM · score 12.50</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Insider Activity</div>
    <div class="metric-val" style="color:#ef4444">Bearish</div>
    <div class="metric-sub">Net buy ratio +0%</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Google Trends</div>
    <div class="metric-val">—</div>
    <div class="metric-sub">— </div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">30d Run-Up</div>
    <div class="metric-val" style="color:#ef4444">-16.4%</div>
    <div class="metric-sub">Risk: <span style="color:#22c55e">Low</span></div>
  </div>
</div><div class="catalysts-section"><div class="cat-title">Key Catalysts &amp; Signals</div><div class="cat-item"><span class="arr">›</span>Insider selling activity (ratio: 0.00)</div><div class="cat-item"><span class="arr">›</span>Period price change: -12.5%</div><div class="cat-item"><span class="arr">›</span>CEO Marc R. Benioff: 94% earnings beat rate, guidance accuracy 0.52, STEM education</div><div class="cat-item"><span class="arr">›</span>Options P/C ratio: 1.42 (Bearish) — calls 9,831 / puts 13,912 (expiry 2026-02-27)</div></div><div class="risk-section"><div class="risk-title">Risk Flags</div><div class="risk-item">RISK: Earnings imminent (&lt;=3 days)</div></div></div>
<div class="deep-dive" id="dd-GOOG" data-ticker="GOOG"><div class="dd-header"><span class="dd-symbol" style="color:#facc15">GOOG</span><span class="action-badge" style="color:#facc15;border-color:#facc1544;background:#422006">Hold</span><span class="earnings-chip" style="color:#a5b4fc;border-color:#a5b4fc22;background:#a5b4fc11">2026-04-23 · 55d</span></div><div class="briefing-card"><div class="briefing-label">AI Briefing</div><span style="color:var(--muted)">AI briefing unavailable — set ANTHROPIC_API_KEY to enable.</span></div><div class="hero-metrics"><div class="hero-chip"><span class="hc-label">Score</span><span class="hc-val" style="color:#facc15">-9</span></div><div class="hero-chip"><span class="hc-label">Action</span><span class="hc-val" style="color:#facc15">Hold</span></div><div class="hero-chip"><span class="hc-label">Risk</span><span class="hc-val" style="color:#22c55e">Low</span></div><div class="hero-chip"><span class="hc-label">Earnings</span><span class="hc-val" style="color:#a5b4fc">2026-04-23 · 55d</span></div></div><div class="lw-chart-wrap"><div class="lw-chart-title">Price Chart — 30d</div><div class="lw-chart" id="lwc-GOOG" data-ohlc='[{"time": "2026-02-04", "open": 332.65, "high": 334.03, "low": 327.97, "close": 328.43}, {"time": "2026-02-05", "open": 328.2, "high": 336.35, "low": 327.49, "close": 333.59}, {"time": "2026-02-06", "open": 335.63, "high": 338.21, "low": 333.75, "close": 335.0}, {"time": "2026-02-07", "open": 336.61, "high": 337.63, "low": 332.13, "close": 336.28}, {"time": "2026-02-08", "open": 340.35, "high": 342.29, "low": 326.72, "close": 338.66}, {"time": "2026-02-09", "open": 334.46, "high": 340.29, "low": 332.64, "close": 338.53}, {"time": "2026-02-10", "open": 336.55, "high": 345.17, "low": 336.01, "close": 344.9}, {"time": "2026-02-11", "open": 348.52, "high": 350.15, "low": 338.59, "close": 340.7}, {"time": "2026-02-12", "open": 343.76, "high": 344.25, "low": 329.37, "close": 333.34}, {"time": "2026-02-13", "open": 313.2, "high": 332.64, "low": 306.92, "close": 331.33}, {"time": "2026-02-14", "open": 327.35, "high": 330.64, "low": 320.15, "close": 323.1}, {"time": "2026-02-15", "open": 321.24, "high": 327.74, "low": 317.7, "close": 324.4}, {"time": "2026-02-16", "open": 320.91, "high": 321.63, "low": 314.66, "close": 318.63}, {"time": "2026-02-17", "open": 318.96, "high": 321.05, "low": 310.13, "close": 311.33}, {"time": "2026-02-18", "open": 312.35, "high": 316.48, "low": 308.15, "close": 309.37}, {"time": "2026-02-19", "open": 307.98, "high": 308.89, "low": 303.9, "close": 306.02}, {"time": "2026-02-20", "open": 300.64, "high": 304.89, "low": 296.9, "close": 302.82}, {"time": "2026-02-21", "open": 302.43, "high": 305.91, "low": 301.98, "close": 303.94}, {"time": "2026-02-22", "open": 302.52, "high": 306.03, "low": 300.67, "close": 303.56}, {"time": "2026-02-23", "open": 304.8, "high": 316.76, "low": 304.42, "close": 314.9}, {"time": "2026-02-24", "open": 319.14, "high": 319.45, "low": 309.99, "close": 311.69}, {"time": "2026-02-25", "open": 310.64, "high": 312.37, "low": 306.09, "close": 310.92}, {"time": "2026-02-26", "open": 312.12, "high": 313.66, "low": 309.36, "close": 313.03}, {"time": "2026-02-27", "open": 312.8, "high": 313.0, "low": 302.41, "close": 307.15}]' data-close='[328.43, 333.59, 335.0, 336.28, 338.66, 338.53, 344.9, 340.7, 333.34, 331.33, 323.1, 324.4, 318.63, 311.33, 309.37, 306.02, 302.82, 303.94, 303.56, 314.9, 311.69, 310.92, 313.03, 307.15]' data-dates='["2026-02-04", "2026-02-05", "2026-02-06", "2026-02-07", "2026-02-08", "2026-02-09", "2026-02-10", "2026-02-11", "2026-02-12", "2026-02-13", "2026-02-14", "2026-02-15", "2026-02-16", "2026-02-17", "2026-02-18", "2026-02-19", "2026-02-20", "2026-02-21", "2026-02-22", "2026-02-23", "2026-02-24", "2026-02-25", "2026-02-26", "2026-02-27"]' data-exp-move="0.8" data-earnings-date="2026-04-23"></div></div><div class="factor-grid-dd"><div class="factor-cell-dd"><div class="fc-name">Sentiment</div><div class="fc-bar"><div class="fc-fill" style="left:49.4%;width:0.6%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-1</div></div><div class="factor-cell-dd"><div class="fc-name">Regime</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Insider</div><div class="fc-bar"><div class="fc-fill" style="left:0.0%;width:50.0%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-100</div></div><div class="factor-cell-dd"><div class="fc-name">Attention</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Price</div><div class="fc-bar"><div class="fc-fill" style="left:33.8%;width:16.2%;background:#f8717188"></div></div><div class="fc-val" style="color:#f87171">-32</div></div><div class="factor-cell-dd"><div class="fc-name">Timing</div><div class="fc-bar"><div class="fc-fill" style="left:35.0%;width:15.0%;background:#f8717188"></div></div><div class="fc-val" style="color:#f87171">-30</div></div><div class="factor-cell-dd"><div class="fc-name">Backtest</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:25.5%;background:#4ade8088"></div></div><div class="fc-val" style="color:#4ade80">+51</div></div><div class="factor-cell-dd"><div class="fc-name">Patterns</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">CEO</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:14.4%;background:#4ade8088"></div></div><div class="fc-val" style="color:#4ade80">+29</div></div><div class="factor-cell-dd"><div class="fc-name">Options</div><div class="fc-bar"><div class="fc-fill" style="left:38.4%;width:11.6%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">-23</div></div></div><div class="dd-metrics-grid">
  <div class="metric-cell">
    <div class="metric-lbl">Sentiment</div>
    <div class="metric-val" style="color:#22c55e">Bullish</div>
    <div class="sent-bar">
      <div class="sb-g" style="width:34%"></div>
      <div class="sb-r" style="width:29%"></div>
      <div class="sb-n" style="flex:1"></div>
    </div>
    <div class="metric-sub">34% bull · 29% bear · 148 headlines · FinBERT -0.12</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Options Flow</div>
    <div class="metric-val" style="color:#ef4444">P/C 1.23</div>
    <div class="metric-sub">Bearish · exp 2026-02-27 · ±0.8% exp · IV 20% · HV 23% · IV/HV <span style="color:#9ca3af;font-weight:700">0.85x Fair</span></div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">CEO Quality</div>
    <div class="metric-val">Sundar  Pichai</div>
    <div class="metric-sub">Beat 75% · STEM · score 28.80</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Insider Activity</div>
    <div class="metric-val" style="color:#9ca3af">Unknown</div>
    <div class="metric-sub">Net buy ratio +0%</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Google Trends</div>
    <div class="metric-val">—</div>
    <div class="metric-sub">— </div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">30d Run-Up</div>
    <div class="metric-val" style="color:#ef4444">—</div>
    <div class="metric-sub">Risk: <span style="color:#22c55e">Low</span></div>
  </div>
</div><div class="catalysts-section"><div class="cat-title">Key Catalysts &amp; Signals</div><div class="cat-item"><span class="arr">›</span>Period price change: -6.5%</div><div class="cat-item"><span class="arr">›</span>CEO Sundar  Pichai: 75% earnings beat rate, guidance accuracy 0.40, STEM education</div><div class="cat-item"><span class="arr">›</span>Options P/C ratio: 1.23 (Bearish) — calls 38,313 / puts 47,201 (expiry 2026-02-27)</div></div></div>
<div class="deep-dive" id="dd-RNMBY" data-ticker="RNMBY"><div class="dd-header"><span class="dd-symbol" style="color:#facc15">RNMBY</span><span class="action-badge" style="color:#facc15;border-color:#facc1544;background:#422006">Hold</span><span class="earnings-chip" style="color:#f97316;border-color:#f9731622;background:#f9731611">2026-03-11 · 12d</span></div><div class="briefing-card"><div class="briefing-label">AI Briefing</div><span style="color:var(--muted)">AI briefing unavailable — set ANTHROPIC_API_KEY to enable.</span></div><div class="hero-metrics"><div class="hero-chip"><span class="hc-label">Score</span><span class="hc-val" style="color:#facc15">-1</span></div><div class="hero-chip"><span class="hc-label">Action</span><span class="hc-val" style="color:#facc15">Hold</span></div><div class="hero-chip"><span class="hc-label">Risk</span><span class="hc-val" style="color:#22c55e">Low</span></div><div class="hero-chip"><span class="hc-label">Earnings</span><span class="hc-val" style="color:#f97316">2026-03-11 · 12d</span></div></div><div class="lw-chart-wrap"><div class="lw-chart-title">Price Chart — 30d</div><div class="lw-chart" id="lwc-RNMBY" data-ohlc='[{"time": "2026-02-04", "open": 428.0, "high": 433.48, "low": 425.89, "close": 433.47}, {"time": "2026-02-05", "open": 428.71, "high": 429.72, "low": 422.54, "close": 429.0}, {"time": "2026-02-06", "open": 432.33, "high": 446.87, "low": 432.15, "close": 443.4}, {"time": "2026-02-07", "open": 439.85, "high": 441.99, "low": 435.25, "close": 441.39}, {"time": "2026-02-08", "open": 433.69, "high": 436.49, "low": 425.87, "close": 431.0}, {"time": "2026-02-09", "open": 425.02, "high": 428.98, "low": 418.15, "close": 421.32}, {"time": "2026-02-10", "open": 415.51, "high": 417.8, "low": 406.03, "close": 408.07}, {"time": "2026-02-11", "open": 413.75, "high": 418.07, "low": 410.03, "close": 417.88}, {"time": "2026-02-12", "open": 410.8, "high": 411.68, "low": 388.0, "close": 393.0}, {"time": "2026-02-13", "open": 374.03, "high": 379.29, "low": 367.0, "close": 374.0}, {"time": "2026-02-14", "open": 376.3, "high": 380.39, "low": 368.81, "close": 379.0}, {"time": "2026-02-15", "open": 391.26, "high": 394.77, "low": 388.36, "close": 394.2}, {"time": "2026-02-16", "open": 390.5, "high": 391.79, "low": 386.1, "close": 388.25}, {"time": "2026-02-17", "open": 380.73, "high": 382.6, "low": 371.65, "close": 377.91}, {"time": "2026-02-18", "open": 379.6, "high": 382.44, "low": 373.22, "close": 375.99}, {"time": "2026-02-19", "open": 382.29, "high": 387.61, "low": 379.09, "close": 383.51}, {"time": "2026-02-20", "open": 374.33, "high": 382.29, "low": 374.0, "close": 379.5}, {"time": "2026-02-21", "open": 390.73, "high": 401.6, "low": 390.46, "close": 398.56}, {"time": "2026-02-22", "open": 404.7, "high": 412.55, "low": 400.16, "close": 409.37}, {"time": "2026-02-23", "open": 406.58, "high": 413.05, "low": 406.4, "close": 409.51}, {"time": "2026-02-24", "open": 402.19, "high": 405.19, "low": 397.08, "close": 400.65}, {"time": "2026-02-25", "open": 404.0, "high": 408.0, "low": 400.51, "close": 406.83}, {"time": "2026-02-26", "open": 393.68, "high": 399.73, "low": 392.5, "close": 399.25}, {"time": "2026-02-27", "open": 389.8, "high": 396.65, "low": 388.25, "close": 396.0}]' data-close='[433.47, 429.0, 443.4, 441.39, 431.0, 421.32, 408.07, 417.88, 393.0, 374.0, 379.0, 394.2, 388.25, 377.91, 375.99, 383.51, 379.5, 398.56, 409.37, 409.51, 400.65, 406.83, 399.25, 396.0]' data-dates='["2026-02-04", "2026-02-05", "2026-02-06", "2026-02-07", "2026-02-08", "2026-02-09", "2026-02-10", "2026-02-11", "2026-02-12", "2026-02-13", "2026-02-14", "2026-02-15", "2026-02-16", "2026-02-17", "2026-02-18", "2026-02-19", "2026-02-20", "2026-02-21", "2026-02-22", "2026-02-23", "2026-02-24", "2026-02-25", "2026-02-26", "2026-02-27"]' data-exp-move="0" data-earnings-date="2026-03-11"></div></div><div class="factor-grid-dd"><div class="factor-cell-dd"><div class="fc-name">Sentiment</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:1.9%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+4</div></div><div class="factor-cell-dd"><div class="fc-name">Regime</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:15.0%;background:#4ade8088"></div></div><div class="fc-val" style="color:#4ade80">+30</div></div><div class="factor-cell-dd"><div class="fc-name">Insider</div><div class="fc-bar"><div class="fc-fill" style="left:0.0%;width:50.0%;background:#ef444488"></div></div><div class="fc-val" style="color:#ef4444">-100</div></div><div class="factor-cell-dd"><div class="fc-name">Attention</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div><div class="factor-cell-dd"><div class="fc-name">Price</div><div class="fc-bar"><div class="fc-fill" style="left:28.4%;width:21.6%;background:#f8717188"></div></div><div class="fc-val" style="color:#f87171">-43</div></div><div class="factor-cell-dd"><div class="fc-name">Timing</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:20.0%;background:#4ade8088"></div></div><div class="fc-val" style="color:#4ade80">+40</div></div><div class="factor-cell-dd"><div class="fc-name">Backtest</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:25.0%;background:#4ade8088"></div></div><div class="fc-val" style="color:#4ade80">+50</div></div><div class="factor-cell-dd"><div class="fc-name">Patterns</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:7.5%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+15</div></div><div class="factor-cell-dd"><div class="fc-name">CEO</div><div class="fc-bar"><div class="fc-fill" style="left:31.0%;width:19.0%;background:#f8717188"></div></div><div class="fc-val" style="color:#f87171">-38</div></div><div class="factor-cell-dd"><div class="fc-name">Options</div><div class="fc-bar"><div class="fc-fill" style="left:50.0%;width:0.0%;background:#facc1588"></div></div><div class="fc-val" style="color:#facc15">+0</div></div></div><div class="dd-metrics-grid">
  <div class="metric-cell">
    <div class="metric-lbl">Sentiment</div>
    <div class="metric-val" style="color:#22c55e">Bullish</div>
    <div class="sent-bar">
      <div class="sb-g" style="width:45%"></div>
      <div class="sb-r" style="width:22%"></div>
      <div class="sb-n" style="flex:1"></div>
    </div>
    <div class="metric-sub">45% bull · 22% bear · 40 headlines · FinBERT +0.11</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Options Flow</div>
    <div class="metric-val" style="color:#9ca3af">P/C N/A</div>
    <div class="metric-sub">No Data</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">CEO Quality</div>
    <div class="metric-val">Armin Theodor Papperge</div>
    <div class="metric-sub">Beat 0% · non-STEM · score -38.00</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Insider Activity</div>
    <div class="metric-val" style="color:#9ca3af">Unknown</div>
    <div class="metric-sub">Net buy ratio +0%</div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">Google Trends</div>
    <div class="metric-val">—</div>
    <div class="metric-sub">— </div>
  </div>
  <div class="metric-cell">
    <div class="metric-lbl">30d Run-Up</div>
    <div class="metric-val" style="color:#ef4444">-0.4%</div>
    <div class="metric-sub">Risk: <span style="color:#22c55e">Low</span></div>
  </div>
</div><div class="regime-row"><span class="regime-lbl">Regime</span><span class="regime-name" style="color:#3b82f6">Pre-Catalyst Loading</span><span class="regime-impl">Event-driven positioning underway</span></div><div class="pat-row"><span class="pat-badge pat-medium">Catalyst Anticipation <span class="pat-conf">(Medium)</span></span></div><div class="catalysts-section"><div class="cat-title">Key Catalysts &amp; Signals</div><div class="cat-item"><span class="arr">›</span>Pre-Catalyst Loading regime — Event-driven positioning underway</div><div class="cat-item"><span class="arr">›</span>Period price change: -8.6%</div><div class="cat-item"><span class="arr">›</span>Catalyst Anticipation pattern detected (Medium confidence)</div><div class="cat-item"><span class="arr">›</span>CEO Armin Theodor Papperger: 0% earnings beat rate, guidance accuracy 0.00, non-STEM education</div></div><div class="risk-section"><div class="risk-title">Risk Flags</div><div class="risk-item">RISK: Low or absent backtest confidence</div></div></div>

    <!-- DISCOVERIES PANEL -->
    <div id="discoveries-panel" class="panel-section">
      <p class="panel-title">S&amp;P 500 Scanner Discoveries
        <span style="font-size:.75rem;font-weight:400;color:var(--muted)">&mdash; top 20 pre-earnings setups</span>
      </p>
      
<div class="scanner-outer">
  <table class="scan-table">
    <thead>
      <tr>
        <th>#</th><th>Ticker</th><th>Earnings Date</th><th>Days Out</th>
        <th>30d Move</th><th>P/C Ratio</th><th>Signal Score</th><th>Action</th>
      </tr>
    </thead>
    <tbody><tr class="sector-header"><td colspan="8">Consumer Defensive<span class="sector-count">1 setup &middot; avg score <span style="color:#facc15">64.7</span></span></td></tr><tr><td class="rank-num">1</td><td class="tk-name">KHC<button class="add-wl-btn" data-ticker="KHC" title="Copy ticker to clipboard">+</button></td><td>2026-04-28</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">60d</span></td><td class="move-pos">+41.2%</td><td>0.02</td><td class="scan-score" style="color:#facc15">64.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Real Estate<span class="sector-count">2 setups &middot; avg score <span style="color:#facc15">59.1</span></span></td></tr><tr><td class="rank-num">2</td><td class="tk-name">KIM<button class="add-wl-btn" data-ticker="KIM" title="Copy ticker to clipboard">+</button></td><td>2026-04-30</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">62d</span></td><td class="move-pos">+41.2%</td><td>0.55</td><td class="scan-score" style="color:#facc15">64.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">3</td><td class="tk-name">CSGP<button class="add-wl-btn" data-ticker="CSGP" title="Copy ticker to clipboard">+</button></td><td>2026-04-28</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">60d</span></td><td class="move-neg">-22.3%</td><td>0.44</td><td class="scan-score" style="color:#facc15">53.4</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Financial Services<span class="sector-count">4 setups &middot; avg score <span style="color:#facc15">55.8</span></span></td></tr><tr><td class="rank-num">4</td><td class="tk-name">KEY<button class="add-wl-btn" data-ticker="KEY" title="Copy ticker to clipboard">+</button></td><td>2026-04-16</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">48d</span></td><td class="move-pos">+41.2%</td><td>0.31</td><td class="scan-score" style="color:#facc15">64.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">5</td><td class="tk-name">KKR<button class="add-wl-btn" data-ticker="KKR" title="Copy ticker to clipboard">+</button></td><td>2026-04-30</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">62d</span></td><td class="move-pos">+41.2%</td><td>3.88</td><td class="scan-score" style="color:#facc15">56.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">6</td><td class="tk-name">FDS<button class="add-wl-btn" data-ticker="FDS" title="Copy ticker to clipboard">+</button></td><td>2026-03-31</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">32d</span></td><td class="move-neg">-19.8%</td><td>0.48</td><td class="scan-score" style="color:#facc15">51.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">7</td><td class="tk-name">AON<button class="add-wl-btn" data-ticker="AON" title="Copy ticker to clipboard">+</button></td><td>2026-05-01</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">63d</span></td><td class="move-neg">-16.4%</td><td>0.17</td><td class="scan-score" style="color:#facc15">49.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Energy<span class="sector-count">3 setups &middot; avg score <span style="color:#facc15">54.9</span></span></td></tr><tr><td class="rank-num">8</td><td class="tk-name">KMI<button class="add-wl-btn" data-ticker="KMI" title="Copy ticker to clipboard">+</button></td><td>2026-04-15</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">47d</span></td><td class="move-pos">+41.2%</td><td>0.15</td><td class="scan-score" style="color:#facc15">64.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">9</td><td class="tk-name">OXY<button class="add-wl-btn" data-ticker="OXY" title="Copy ticker to clipboard">+</button></td><td>2026-05-06</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">68d</span></td><td class="move-pos">+18.2%</td><td>0.20</td><td class="scan-score" style="color:#facc15">50.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">10</td><td class="tk-name">COP<button class="add-wl-btn" data-ticker="COP" title="Copy ticker to clipboard">+</button></td><td>2026-05-07</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">69d</span></td><td class="move-pos">+14.8%</td><td>0.21</td><td class="scan-score" style="color:#facc15">48.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Technology<span class="sector-count">2 setups &middot; avg score <span style="color:#facc15">54.7</span></span></td></tr><tr><td class="rank-num">11</td><td class="tk-name">GRMN<button class="add-wl-btn" data-ticker="GRMN" title="Copy ticker to clipboard">+</button></td><td>2026-04-29</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">61d</span></td><td class="move-pos">+36.2%</td><td>0.38</td><td class="scan-score" style="color:#facc15">61.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">12</td><td class="tk-name">NVDA<button class="add-wl-btn" data-ticker="NVDA" title="Copy ticker to clipboard">+</button></td><td>2026-05-20</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">82d</span></td><td class="move-neg">-12.8%</td><td>0.53</td><td class="scan-score" style="color:#facc15">47.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Industrials<span class="sector-count">5 setups &middot; avg score <span style="color:#facc15">53.2</span></span></td></tr><tr><td class="rank-num">13</td><td class="tk-name">GNRC<button class="add-wl-btn" data-ticker="GNRC" title="Copy ticker to clipboard">+</button></td><td>2026-04-29</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">61d</span></td><td class="move-pos">+36.2%</td><td>0.54</td><td class="scan-score" style="color:#facc15">61.7</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">14</td><td class="tk-name">CTAS<button class="add-wl-btn" data-ticker="CTAS" title="Copy ticker to clipboard">+</button></td><td>2026-03-25</td><td><span class="days-badge" style="color:#facc15;border-color:#facc1544;background:#facc1511">26d</span></td><td class="move-neg">-22.3%</td><td>0.58</td><td class="scan-score" style="color:#facc15">53.4</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">15</td><td class="tk-name">FAST<button class="add-wl-btn" data-ticker="FAST" title="Copy ticker to clipboard">+</button></td><td>2026-04-13</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">45d</span></td><td class="move-neg">-19.8%</td><td>0.42</td><td class="scan-score" style="color:#facc15">51.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">16</td><td class="tk-name">AOS<button class="add-wl-btn" data-ticker="AOS" title="Copy ticker to clipboard">+</button></td><td>2026-05-05</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">67d</span></td><td class="move-neg">-16.4%</td><td>0.21</td><td class="scan-score" style="color:#facc15">49.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr><td class="rank-num">17</td><td class="tk-name">TT<button class="add-wl-btn" data-ticker="TT" title="Copy ticker to clipboard">+</button></td><td>2026-04-29</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">61d</span></td><td class="move-pos">+15.6%</td><td>0.38</td><td class="scan-score" style="color:#facc15">49.4</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Basic Materials<span class="sector-count">1 setup &middot; avg score <span style="color:#facc15">51.9</span></span></td></tr><tr><td class="rank-num">18</td><td class="tk-name">FCX<button class="add-wl-btn" data-ticker="FCX" title="Copy ticker to clipboard">+</button></td><td>2026-04-23</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">55d</span></td><td class="move-neg">-19.8%</td><td>0.54</td><td class="scan-score" style="color:#facc15">51.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Consumer Cyclical<span class="sector-count">1 setup &middot; avg score <span style="color:#facc15">50.9</span></span></td></tr><tr><td class="rank-num">19</td><td class="tk-name">ORLY<button class="add-wl-btn" data-ticker="ORLY" title="Copy ticker to clipboard">+</button></td><td>2026-04-22</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">54d</span></td><td class="move-pos">+18.2%</td><td>0.50</td><td class="scan-score" style="color:#facc15">50.9</td><td><span style="color:var(--muted)">—</span></td></tr><tr class="sector-header"><td colspan="8">Communication Services<span class="sector-count">1 setup &middot; avg score <span style="color:#facc15">47.7</span></span></td></tr><tr><td class="rank-num">20</td><td class="tk-name">NWSA<button class="add-wl-btn" data-ticker="NWSA" title="Copy ticker to clipboard">+</button></td><td>2026-05-07</td><td><span class="days-badge" style="color:#a5b4fc;border-color:#a5b4fc44;background:#a5b4fc11">69d</span></td><td class="move-neg">-12.8%</td><td>0.07</td><td class="scan-score" style="color:#facc15">47.7</td><td><span style="color:var(--muted)">—</span></td></tr></tbody>
  </table>
</div>
    </div>

    <!-- TRACK RECORD PANEL -->
    <div id="track-record-panel" class="panel-section">
      <p class="panel-title">Track Record
        <span style="font-size:.75rem;font-weight:400;color:var(--muted)">&mdash; signal accuracy after earnings</span>
      </p>
      
<div class="outcome-stats">
  <div class="stat-card">
    <div class="stat-lbl">Signals Tracked</div>
    <div class="stat-val">1</div>
    <div class="stat-sub">0 with result</div>
  </div>
  <div class="stat-card">
    <div class="stat-lbl">Win Rate</div>
    <div class="stat-val" style="color:#ef4444">—</div>
    <div class="stat-sub">0 correct · 0 decided</div>
  </div>
  <div class="stat-card">
    <div class="stat-lbl">Avg Actual Move</div>
    <div class="stat-val" style="color:#22c55e">+6.2%</div>
    <div class="stat-sub">across all outcomes</div>
  </div>
  <div class="stat-card">
    <div class="stat-lbl">Avg Move (Wins)</div>
    <div class="stat-val" style="color:#22c55e">—</div>
    <div class="stat-sub">when signal was correct</div>
  </div>
  <div class="stat-card">
    <div class="stat-lbl">EPS Beat Rate</div>
    <div class="stat-val">0%</div>
    <div class="stat-sub">0 beats · 1 tracked</div>
  </div>
</div>
<div class="outcome-table-outer">
  <table class="outcome-table">
    <thead>
      <tr>
        <th>Ticker</th>
        <th>Earnings Date</th>
        <th>Signal</th>
        <th>Action</th>
        <th>Actual Move</th>
        <th>Correct?</th>
        <th>EPS Result</th>
        <th>EPS Detail</th>
      </tr>
    </thead>
    <tbody>
<tr>
  <td style="font-weight:700">CRM</td>
  <td>2026-02-25</td>
  <td style="color:#facc15">+1</td>
  <td style="color:#facc15">Hold</td>
  <td style="color:#22c55e">+6.2%</td>
  <td class="correct-na">—</td>
  <td style="color:#9ca3af">—</td>
  <td style="color:var(--muted);font-size:0.75rem">—</td>
</tr></tbody>
  </table>
</div>
<div class="scatter-outer">
  <div class="scatter-lbl">Signal Score vs Actual Post-Earnings Move</div>
  <canvas id="outcome-scatter"
    data-points='[{"x": 1, "y": 6.22}]'
    data-colors='["#9ca3af77"]'
    data-labels='["CRM 2026-02-25"]'
    style="width:100%;height:220px"></canvas>
</div>
    </div>

  </main>
</div>

<!-- ═══ STATUS BAR ═══ -->
<div id="status-bar">
  <span>Updated 2026-02-27 10:31</span>
  <span class="sb-sep">|</span> <span class="sb-mkt">SPY $689.30 <span style="color:#22c55e">+0.0%</span></span> <span class="sb-sep">·</span> <span class="sb-mkt">QQQ $609.24 <span style="color:#ef4444">-2.2%</span></span> <span class="sb-sep">·</span> <span class="sb-mkt">VIX 18.63 <span style="color:#22c55e">+15.8%</span></span>
  <button id="sb-theme-btn">&#9788; Light</button>
</div>

<!-- ═══ COMMAND PALETTE ═══ -->
<div id="cmd-overlay"><div id="cmd-box"><input id="cmd-input" type="text" placeholder="Jump to ticker... (Esc to close)" autocomplete="off" spellcheck="false"><div id="cmd-results" data-items='[{"ticker": "LLY", "action": "Hold", "score": -6}, {"ticker": "NVO", "action": "Hold", "score": -22}, {"ticker": "CRM", "action": "Hold", "score": -3}, {"ticker": "GOOG", "action": "Hold", "score": -9}, {"ticker": "RNMBY", "action": "Hold", "score": -1}]'></div></div></div>

<script>
(function() {
  function _cssVar(v) { return getComputedStyle(document.documentElement).getPropertyValue(v).trim(); }
  const GRID_COLOR  = _cssVar('--border')  || '#252545';
  const LABEL_COLOR = _cssVar('--muted')   || '#6b7280';
  const ACCENT      = _cssVar('--accent')  || '#a78bfa';

  // ── Panel navigation helpers ──
  function showDeepDive(ticker) {
    document.querySelectorAll('.deep-dive, .panel-section').forEach(function(el) {
      el.classList.remove('visible');
    });
    var target = document.getElementById('dd-' + ticker);
    if (target) {
      target.classList.add('visible');
      // Resize LW chart after reveal
      var lwEl = target.querySelector('.lw-chart');
      if (lwEl && lwEl._lwChart) {
        setTimeout(function() { lwEl._lwChart.timeScale().fitContent(); }, 60);
      }
    }
    document.querySelectorAll('.rail-item').forEach(function(item) {
      item.classList.toggle('active', item.dataset.ticker === ticker);
    });
    document.querySelectorAll('.rail-nav-btn').forEach(function(b) { b.classList.remove('active'); });
  }

  // ── Rail item clicks ──
  document.querySelectorAll('.rail-item').forEach(function(item) {
    item.addEventListener('click', function() { showDeepDive(item.dataset.ticker); });
  });

  // ── Panel nav buttons (Discoveries / Track Record) ──
  document.querySelectorAll('.rail-nav-btn[data-panel]').forEach(function(btn) {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.deep-dive, .panel-section').forEach(function(el) { el.classList.remove('visible'); });
      var panel = document.getElementById(btn.dataset.panel + '-panel');
      if (panel) panel.classList.add('visible');
      document.querySelectorAll('.rail-item').forEach(function(i) { i.classList.remove('active'); });
      document.querySelectorAll('.rail-nav-btn').forEach(function(b) { b.classList.remove('active'); });
      btn.classList.add('active');
    });
  });

  // ── Lightweight Charts ──
  document.querySelectorAll('.lw-chart').forEach(function(el) {
    var ohlcData  = JSON.parse(el.dataset.ohlc  || '[]');
    var closeData = JSON.parse(el.dataset.close || '[]');
    var datesData = JSON.parse(el.dataset.dates || '[]');
    var expMove      = parseFloat(el.dataset.expMove || '0');
    var earningsDate = el.dataset.earningsDate || '';

    var isDark    = document.documentElement.getAttribute('data-theme') !== 'light';
    var textColor = isDark ? '#94a3b8' : '#475569';
    var gridColor = isDark ? '#252545' : '#dde1ea';

    var chart = LightweightCharts.createChart(el, {
      layout: { background: { color: 'transparent' }, textColor: textColor },
      grid:   { vertLines: { color: gridColor }, horzLines: { color: gridColor } },
      crosshair: { mode: LightweightCharts.CrosshairMode.Normal },
      rightPriceScale: { borderColor: gridColor },
      timeScale: { borderColor: gridColor, timeVisible: true },
      handleScroll: { mouseWheel: false },
      handleScale:  { mouseWheel: false },
    });
    el._lwChart = chart;

    function sortDedup(arr) {
      var sorted = arr.slice().sort(function(a,b){ return a.time < b.time ? -1 : 1; });
      var out = []; var seen = {};
      sorted.forEach(function(d){ if (!seen[d.time]) { out.push(d); seen[d.time]=1; } });
      return out;
    }

    var mainSeries = null;
    if (ohlcData.length > 0) {
      var candle = chart.addCandlestickSeries({
        upColor: '#22c55e', downColor: '#ef4444',
        borderUpColor: '#22c55e', borderDownColor: '#ef4444',
        wickUpColor: '#22c55e', wickDownColor: '#ef4444',
      });
      candle.setData(sortDedup(ohlcData));
      mainSeries = candle;
    } else if (closeData.length > 0 && datesData.length === closeData.length) {
      var areaData = closeData.map(function(p,i){ return { time: datesData[i], value: p }; });
      var area = chart.addAreaSeries({
        lineColor: '#a78bfa', topColor: '#a78bfa33', bottomColor: '#a78bfa00', lineWidth: 2,
      });
      area.setData(sortDedup(areaData));
      mainSeries = area;
    }

    // Expected move cone
    if (expMove > 0 && earningsDate && closeData.length > 0 && datesData.length > 0) {
      var lastPrice = closeData[closeData.length - 1];
      var lastDate  = datesData[datesData.length - 1];
      var upper = lastPrice * (1 + expMove / 100);
      var lower = lastPrice * (1 - expMove / 100);
      var eDate = earningsDate > lastDate ? earningsDate : lastDate;
      var uSeries = chart.addLineSeries({ color: '#22c55e66', lineWidth: 1, lineStyle: 2, lastValueVisible: false, priceLineVisible: false });
      var lSeries = chart.addLineSeries({ color: '#ef444466', lineWidth: 1, lineStyle: 2, lastValueVisible: false, priceLineVisible: false });
      uSeries.setData([{ time: lastDate, value: lastPrice }, { time: eDate, value: upper }]);
      lSeries.setData([{ time: lastDate, value: lastPrice }, { time: eDate, value: lower }]);
    }

    // Earnings date marker (arrow on chart)
    if (mainSeries && earningsDate && earningsDate.length >= 10) {
      try {
        mainSeries.setMarkers([{
          time: earningsDate,
          position: 'aboveBar',
          color: '#a78bfa',
          shape: 'arrowDown',
          text: 'Earnings',
        }]);
      } catch(e) {}
    }
    chart.timeScale().fitContent();
  });

  // ── Sparklines ──
  document.querySelectorAll('.sparkline-canvas').forEach(function(canvas) {
    const prices = JSON.parse(canvas.dataset.prices || '[]');
    const dates  = JSON.parse(canvas.dataset.dates  || '[]');
    const color  = canvas.dataset.color || '#9ca3af';
    if (!prices.length) return;
    new Chart(canvas, {
      type: 'line',
      data: { labels: dates, datasets: [{ data: prices, borderColor: color, borderWidth: 1.5,
        fill: true, backgroundColor: color + '18', pointRadius: 0, tension: 0.35 }] },
      options: { responsive: true, maintainAspectRatio: false, animation: false,
        plugins: { legend: { display: false },
          tooltip: { mode: 'index', intersect: false, callbacks: { label: function(ctx) { return '$' + ctx.parsed.y.toFixed(2); } } } },
        scales: { x: { display: false }, y: { display: false } } }
    });
  });

  // ── Sentiment Donuts ──
  document.querySelectorAll('.donut-canvas').forEach(function(canvas) {
    const bull = parseFloat(canvas.dataset.bull || 0);
    const bear = parseFloat(canvas.dataset.bear || 0);
    const neut = parseFloat(canvas.dataset.neut || 0);
    new Chart(canvas, {
      type: 'doughnut',
      data: { labels: ['Bullish','Bearish','Neutral'],
        datasets: [{ data: [bull,bear,neut], backgroundColor: ['#22c55e','#ef4444','#374151'],
          borderWidth: 0, hoverOffset: 4 }] },
      options: { responsive: true, maintainAspectRatio: false, animation: false, cutout: '70%',
        plugins: { legend: { display: false },
          tooltip: { callbacks: { label: function(ctx) { return ctx.label + ': ' + ctx.parsed.toFixed(1) + '%'; } } } } }
    });
  });

  // ── Timeline Canvases (sentiment history in deep dive) ──
  document.querySelectorAll('.timeline-canvas').forEach(function(canvas) {
    const dates  = JSON.parse(canvas.dataset.dates  || '[]');
    const scores = JSON.parse(canvas.dataset.scores || '[]');
    if (scores.length < 2) return;
    const last  = scores[scores.length - 1];
    const first = scores[0];
    const color = last >= first ? '#4ade80' : '#f87171';
    new Chart(canvas, {
      type: 'line',
      data: { labels: dates, datasets: [{ data: scores, borderColor: color, borderWidth: 1.5,
        fill: true, backgroundColor: color + '18', pointRadius: 0, tension: 0.35 }] },
      options: { responsive: true, maintainAspectRatio: false, animation: false,
        plugins: { legend: { display: false },
          tooltip: { mode: 'index', intersect: false,
            callbacks: { label: function(ctx) { return 'Sentiment: ' + (ctx.parsed.y > 0 ? '+' : '') + ctx.parsed.y.toFixed(1); } } } },
        scales: { x: { display: false },
          y: { display: true, grid: { color: GRID_COLOR },
            ticks: { color: LABEL_COLOR, font: { size: 8 }, maxTicksLimit: 3,
              callback: function(v) { return (v >= 0 ? '+' : '') + v; } },
            suggestedMin: -100, suggestedMax: 100 } } }
    });
  });

  // ── Sentiment History Lines (legacy cards) ──
  document.querySelectorAll('.history-canvas').forEach(function(canvas) {
    const dates  = JSON.parse(canvas.dataset.dates  || '[]');
    const scores = JSON.parse(canvas.dataset.scores || '[]');
    if (scores.length < 2) return;
    const last  = scores[scores.length - 1];
    const first = scores[0];
    const color = last >= first ? '#4ade80' : '#f87171';
    new Chart(canvas, {
      type: 'line',
      data: { labels: dates, datasets: [{ data: scores, borderColor: color, borderWidth: 1.5,
        fill: true, backgroundColor: color + '18', pointRadius: 0, tension: 0.35 }] },
      options: { responsive: true, maintainAspectRatio: false, animation: false,
        plugins: { legend: { display: false },
          tooltip: { mode: 'index', intersect: false,
            callbacks: { label: function(ctx) { return 'Sentiment: ' + (ctx.parsed.y > 0 ? '+' : '') + ctx.parsed.y.toFixed(1); } } } },
        scales: { x: { display: false },
          y: { display: false, suggestedMin: -100, suggestedMax: 100 } } }
    });
  });

  // ── Outcome Scatter ──
  (function() {
    const canvas = document.getElementById('outcome-scatter');
    if (!canvas) return;
    const points = JSON.parse(canvas.dataset.points || '[]');
    const colors = JSON.parse(canvas.dataset.colors || '[]');
    const labels = JSON.parse(canvas.dataset.labels || '[]');
    if (!points.length) return;
    new Chart(canvas, {
      type: 'scatter',
      data: { datasets: [{ data: points, backgroundColor: colors,
        borderColor: colors.map(function(c) { return c.replace('99','ff').replace('77','ff'); }),
        borderWidth: 1, pointRadius: 6, pointHoverRadius: 9 }] },
      options: { responsive: true, maintainAspectRatio: false, animation: false,
        plugins: { legend: { display: false },
          tooltip: { callbacks: { label: function(ctx) {
            const lbl = labels[ctx.dataIndex] || '';
            const y = ctx.parsed.y;
            return lbl + '  —  Score ' + ctx.parsed.x + ',  Move ' + (y >= 0 ? '+' : '') + y.toFixed(1) + '%';
          } } } },
        scales: {
          x: { title: { display: true, text: 'Signal Score', color: LABEL_COLOR, font: { size: 11 } },
            grid: { color: GRID_COLOR }, ticks: { color: LABEL_COLOR } },
          y: { title: { display: true, text: 'Actual Move %', color: LABEL_COLOR, font: { size: 11 } },
            grid: { color: GRID_COLOR },
            ticks: { color: LABEL_COLOR, callback: function(v) { return (v >= 0 ? '+' : '') + v + '%'; } } } } }
    });
  })();

  // ── Factor Radars ──
  document.querySelectorAll('.radar-canvas').forEach(function(canvas) {
    const factors = JSON.parse(canvas.dataset.factors || '[]');
    const labels  = JSON.parse(canvas.dataset.labels  || '[]');
    if (!factors.length) return;
    new Chart(canvas, {
      type: 'radar',
      data: { labels: labels, datasets: [{ data: factors, backgroundColor: ACCENT + '22',
        borderColor: ACCENT, borderWidth: 1.5, pointBackgroundColor: ACCENT,
        pointBorderColor: 'transparent', pointRadius: 2, pointHoverRadius: 4 }] },
      options: { responsive: true, maintainAspectRatio: false, animation: false,
        scales: { r: { min: 0, max: 100, ticks: { display: false, stepSize: 25 },
          grid: { color: GRID_COLOR }, angleLines: { color: GRID_COLOR },
          pointLabels: { color: LABEL_COLOR, font: { size: 8 } } } },
        plugins: { legend: { display: false },
          tooltip: { callbacks: { label: function(ctx) {
            var raw = (ctx.parsed.r * 2 - 100).toFixed(0);
            return ctx.label + ': ' + (raw > 0 ? '+' : '') + raw;
          } } } } }
    });
  });

  // ── Signal calibration chart ──
  (function() {
    const canvas = document.getElementById('calib-chart');
    if (!canvas) return;
    const d = JSON.parse(canvas.dataset.chart || '{}');
    if (!d.labels || !d.labels.length) return;
    const wr = d.winrates.map(function(v) { return v !== null ? v : NaN; });
    const mv = d.moves.map(function(v)    { return v !== null ? v : NaN; });
    new Chart(canvas, {
      type: 'bar',
      data: { labels: d.labels, datasets: [
        { label: 'Win Rate %', data: wr,
          backgroundColor: wr.map(function(v) { return isNaN(v) ? '#37374444' : v >= 60 ? '#22c55e44' : v >= 40 ? '#facc1544' : '#ef444444'; }),
          borderColor: wr.map(function(v) { return isNaN(v) ? '#373744' : v >= 60 ? '#22c55e' : v >= 40 ? '#facc15' : '#ef4444'; }),
          borderWidth: 1.5, yAxisID: 'y' },
        { label: 'Avg Move %', data: mv, type: 'line', borderColor: ACCENT, borderWidth: 2,
          pointRadius: 4, pointBackgroundColor: ACCENT, tension: 0.3, yAxisID: 'y2', fill: false }
      ] },
      options: { responsive: true, maintainAspectRatio: false, animation: false,
        plugins: { legend: { display: true, labels: { color: LABEL_COLOR, boxWidth: 12, font: { size: 10 }, padding: 12 } },
          tooltip: { mode: 'index', intersect: false } },
        scales: {
          x: { grid: { color: GRID_COLOR }, ticks: { color: LABEL_COLOR, font: { size: 9 } } },
          y: { grid: { color: GRID_COLOR },
            ticks: { color: LABEL_COLOR, callback: function(v) { return v + '%'; } },
            title: { display: true, text: 'Win Rate', color: LABEL_COLOR, font: { size: 9 } }, min: 0, max: 100 },
          y2: { position: 'right', grid: { display: false },
            ticks: { color: LABEL_COLOR, callback: function(v) { return (v >= 0 ? '+' : '') + v + '%'; } },
            title: { display: true, text: 'Avg Move', color: LABEL_COLOR, font: { size: 9 } } } } }
    });
  })();

  // ── Market context sparklines ──
  document.querySelectorAll('.mkt-spark').forEach(function(canvas) {
    const prices = JSON.parse(canvas.dataset.prices || '[]');
    const dates  = JSON.parse(canvas.dataset.dates  || '[]');
    const color  = canvas.dataset.color || '#9ca3af';
    if (!prices.length) return;
    new Chart(canvas, {
      type: 'line',
      data: { labels: dates, datasets: [{ data: prices, borderColor: color, borderWidth: 1.5, fill: false, pointRadius: 0, tension: 0.3 }] },
      options: { responsive: true, maintainAspectRatio: false, animation: false,
        plugins: { legend: { display: false }, tooltip: { enabled: false } },
        scales: { x: { display: false }, y: { display: false } } }
    });
  });

  // ── Command palette ──
  var cmdItems = [];
  (function() {
    var resultsEl = document.getElementById('cmd-results');
    if (resultsEl && resultsEl.dataset.items) {
      try { cmdItems = JSON.parse(resultsEl.dataset.items); } catch(e) {}
    }
  })();

  function renderCmdResults(query) {
    var resultsEl = document.getElementById('cmd-results');
    if (!resultsEl) return;
    var filtered = query
      ? cmdItems.filter(function(item) { return item.ticker.toLowerCase().indexOf(query.toLowerCase()) === 0; })
      : cmdItems;
    var AC = {'Strong Buy':'#22c55e','Buy':'#4ade80','Hold':'#facc15','Sell':'#f87171','Strong Sell':'#ef4444'};
    var html = '';
    filtered.forEach(function(item, idx) {
      var ac = AC[item.action] || '#9ca3af';
      var sc = (item.score >= 0 ? '+' : '') + item.score;
      html += '<div class="cmd-result' + (idx === 0 ? ' focused' : '') + '" data-ticker="' + item.ticker + '">' +
        '<span class="cr-sym">' + item.ticker + '</span>' +
        '<span class="cr-badge" style="color:' + ac + '">' + (item.action || '') + '</span>' +
        '<span style="color:#9ca3af;font-size:.75rem;margin-left:auto">' + sc + '</span></div>';
    });
    resultsEl.innerHTML = html || '<div style="padding:.75rem 1.1rem;color:var(--muted);font-size:.82rem">No matches</div>';
    resultsEl.querySelectorAll('.cmd-result').forEach(function(el) {
      el.addEventListener('click', function() {
        document.getElementById('cmd-overlay').classList.remove('open');
        showDeepDive(el.dataset.ticker);
      });
    });
  }

  document.addEventListener('keydown', function(e) {
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      var ov = document.getElementById('cmd-overlay');
      if (!ov) return;
      ov.classList.toggle('open');
      if (ov.classList.contains('open')) {
        var inp = document.getElementById('cmd-input');
        inp.value = '';
        renderCmdResults('');
        inp.focus();
      }
    }
    if (e.key === 'Escape') {
      var ov = document.getElementById('cmd-overlay');
      if (ov) ov.classList.remove('open');
    }
  });

  var cmdInput = document.getElementById('cmd-input');
  if (cmdInput) {
    cmdInput.addEventListener('input', function() { renderCmdResults(cmdInput.value.trim()); });
    cmdInput.addEventListener('keydown', function(e) {
      if (e.key === 'Enter') {
        var focused = document.querySelector('.cmd-result.focused');
        if (focused) focused.click();
      }
      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
        e.preventDefault();
        var results = Array.from(document.querySelectorAll('.cmd-result'));
        var idx = results.findIndex(function(r) { return r.classList.contains('focused'); });
        results.forEach(function(r) { r.classList.remove('focused'); });
        var next = e.key === 'ArrowDown' ? Math.min(idx + 1, results.length - 1) : Math.max(idx - 1, 0);
        if (results[next]) { results[next].classList.add('focused'); results[next].scrollIntoView({ block: 'nearest' }); }
      }
    });
  }
  var cmdOverlay = document.getElementById('cmd-overlay');
  if (cmdOverlay) {
    cmdOverlay.addEventListener('click', function(e) {
      if (e.target === cmdOverlay) cmdOverlay.classList.remove('open');
    });
  }

  // ── Scanner copy buttons ──
  document.querySelectorAll('.add-wl-btn').forEach(function(btn) {
    btn.addEventListener('click', function(e) {
      e.stopPropagation();
      var tk = btn.dataset.ticker;
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(tk).then(function() {
          btn.textContent = '✓'; btn.style.color = '#22c55e'; btn.style.borderColor = '#22c55e';
          setTimeout(function() { btn.textContent = '+'; btn.style.color = ''; btn.style.borderColor = ''; }, 1800);
        }).catch(function() { btn.textContent = tk; setTimeout(function() { btn.textContent = '+'; }, 2000); });
      } else { btn.textContent = tk; setTimeout(function() { btn.textContent = '+'; }, 2000); }
    });
  });

  // ── Theme toggle (status bar) ──
  (function() {
    var btn = document.getElementById('sb-theme-btn');
    if (!btn) return;
    function applyTheme(theme) {
      if (theme === 'light') {
        document.documentElement.setAttribute('data-theme', 'light');
        btn.innerHTML = '&#9790; Dark';
      } else {
        document.documentElement.removeAttribute('data-theme');
        btn.innerHTML = '&#9788; Light';
      }
    }
    var stored = localStorage.getItem('theme') || 'dark';
    applyTheme(stored);
    btn.addEventListener('click', function() {
      var next = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      try { localStorage.setItem('theme', next); } catch(e) {}
      applyTheme(next);
    });
  })();

})();
</script>
</body>
</html>